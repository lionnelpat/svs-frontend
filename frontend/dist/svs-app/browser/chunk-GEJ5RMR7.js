import{l as h,m as d,n as v}from"./chunk-Y5JEGQKB.js";import{b as o,e as c}from"./chunk-ZXANPB2F.js";import{P as l,U as p,k as g,n as s,w as i}from"./chunk-TX7UWVJS.js";var m=class n{constructor(e,t,r){this.http=e;this.logger=t;this.errorHandler=r}apiBaseUrl=`${h.apiBaseUrl}/${h.apiVersion}/ships`;getActiveShips(e={}){let t=new o().set("page",e.page?.toString()||"0").set("size",e.size?.toString()||"10").set("sortBy","nom").set("sortDirection","asc");return this.http.get(`${this.apiBaseUrl}/active`,{params:t}).pipe(s(r=>({ships:r,total:r.total,page:r.page,size:r.size})),i(r=>this.handleError(r,"Chargement des navires actifs")))}getShips(e={}){this.logger.info("Appel API - Liste des navires",e);let t=new o().set("page",e.page?.toString()||"0").set("size",e.size?.toString()||"10").set("sortBy","nom").set("sortDirection","asc");return e.search&&(t=t.set("search",e.search)),e.pavillon&&(t=t.set("pavillon",e.pavillon)),e.compagnieId&&(t=t.set("compagnieId",e.compagnieId.toString())),e.typeNavire&&(t=t.set("typeNavire",e.typeNavire)),e.active!==void 0&&(t=t.set("active",e.active.toString())),this.http.get(this.apiBaseUrl,{params:t}).pipe(s(r=>({ships:r.ships,total:r.total,page:r.page,size:r.size})),i(r=>this.handleError(r,"Chargement des navires")))}getShipById(e){return this.http.get(`${this.apiBaseUrl}/${e}`).pipe(i(t=>this.handleError(t,`Chargement navire ID: ${e}`)))}createShip(e){return this.http.post(this.apiBaseUrl,e).pipe(i(t=>this.handleError(t,"Cr\xE9ation navire")))}updateShip(e){return this.http.put(`${this.apiBaseUrl}/${e.id}`,e).pipe(i(t=>this.handleError(t,`Mise \xE0 jour navire ID: ${e.id}`)))}deleteShip(e){return this.http.delete(`${this.apiBaseUrl}/${e}`).pipe(s(()=>!0),i(t=>this.handleError(t,`Suppression navire ID: ${e}`)))}toggleShipStatus(e){return this.http.patch(`${this.apiBaseUrl}/${e}/toggle-status`,{}).pipe(i(t=>this.handleError(t,`Changement de statut navire ID: ${e}`)))}getShipsByCompany(e){return this.http.get(`${this.apiBaseUrl}/by-company/${e}`).pipe(i(t=>this.handleError(t,`R\xE9cup\xE9ration navires de la compagnie ${e}`)))}getShipStatistics(){return this.http.get(`${this.apiBaseUrl}/statistics`).pipe(i(e=>this.handleError(e,"R\xE9cup\xE9ration statistiques navires")))}handleError(e,t){return this.logger.error(`${t} - Erreur`,e),this.errorHandler.handleErrorWithContext(e,t),g(()=>e)}getShipTypes(){return this.http.get(`${this.apiBaseUrl}/types`).pipe(s(e=>{let t=Object.entries(e).map(([r,a])=>({label:a,value:r}));return this.logger.debug("Types de navires charg\xE9s",t),t}),i(e=>this.handleError(e,"Chargement des types de navires")))}getClassifications(){return this.http.get(`${this.apiBaseUrl}/classifications`).pipe(s(e=>{let t=Object.entries(e).map(([r,a])=>({label:a,value:r}));return this.logger.debug("Classifications charg\xE9s",t),t}),i(e=>this.handleError(e,"Chargement des classifications de navires")))}getFlag(){return this.http.get(`${this.apiBaseUrl}/flags`).pipe(s(e=>{let t=Object.entries(e).map(([r,a])=>({label:a,value:r}));return this.logger.debug("Flag de navires charg\xE9s",t),t}),i(e=>this.handleError(e,"Chargement des flags de navires")))}static \u0275fac=function(t){return new(t||n)(p(c),p(d),p(v))};static \u0275prov=l({token:n,factory:n.\u0275fac,providedIn:"root"})};export{m as a};
