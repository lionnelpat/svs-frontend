import{a as fe,b as ve}from"./chunk-G3KA6RIZ.js";import{a as k,b as Ue}from"./chunk-33HHV6KE.js";import{$ as Ne,B as xe,C as ye,D as Ee,G as Me,I as Se,J as Pe,K as Fe,M as $,N as G,O as we,P as Ie,Q as Te,S as De,W as ke,X as Re,Y as Le,aa as Ve,ba as ze,j as ue,k as ge,m as D,o as _e,p as Ce,q as Oe,r as he,s as j,t as q,v as W,w as _,y as H,z as be}from"./chunk-Y5JEGQKB.js";import"./chunk-S35HUXPS.js";import{a as A,b as B}from"./chunk-CMB77VUU.js";import{Aa as U,Ba as X,_ as me,ca as z,ga as ce,xa as I,ya as de,za as T}from"./chunk-ZXANPB2F.js";import{Bb as d,Cb as u,Ec as w,Fb as oe,Ib as ne,Jb as re,Jc as se,Kb as ae,Kc as y,Ma as l,Na as f,Ob as r,Pb as C,Qb as v,Sb as S,Tb as P,Ub as F,V as te,Wb as E,Xa as x,aa as ie,ba as O,ca as h,cb as g,ec as le,hc as pe,ka as b,kb as m,mb as M,nb as L,tb as o,ub as n,vb as c,zb as N}from"./chunk-TX7UWVJS.js";import{a as ee}from"./chunk-EQDQRRRY.js";var R="OPERATION_KEY";var Ke=()=>[10,25,50];function Ye(a,i){a&1&&(o(0,"tr")(1,"th",14),r(2,"#"),n(),o(3,"th",15),r(4," Code "),c(5,"p-sortIcon",16),n(),o(6,"th",17),r(7," Nom "),c(8,"p-sortIcon",18),n(),o(9,"th"),r(10,"Description"),n(),o(11,"th",19),r(12," Prix XOF "),c(13,"p-sortIcon",20),n(),o(14,"th",21),r(15," Prix EUR "),c(16,"p-sortIcon",22),n(),o(17,"th",23),r(18," Statut "),c(19,"p-sortIcon",24),n(),o(20,"th",25),r(21,"Actions"),n()())}function Qe(a,i){a&1&&(o(0,"span"),r(1,"..."),n())}function Ze(a,i){if(a&1){let e=N();o(0,"tr")(1,"td")(2,"span",26),r(3),n()(),o(4,"td")(5,"span",27),r(6),n()(),o(7,"td")(8,"div",28)(9,"span",29),r(10),n()()(),o(11,"td")(12,"span",30),r(13),le(14,"slice"),g(15,Qe,2,0,"span",31),n()(),o(16,"td")(17,"span",32),r(18),n()(),o(19,"td")(20,"span",33),r(21),n()(),o(22,"td"),c(23,"p-tag",34),n(),o(24,"td")(25,"div",35)(26,"button",36),d("click",function(){let p=O(e).$implicit,s=u();return h(s.onView(p))}),n(),o(27,"button",37),d("click",function(){let p=O(e).$implicit,s=u();return h(s.onEdit(p))}),n(),o(28,"button",38),d("click",function(){let p=O(e).$implicit,s=u();return h(s.onToggleStatus(p))}),n(),o(29,"button",39),d("click",function(){let p=O(e).$implicit,s=u();return h(s.onDelete(p))}),n()()()()}if(a&2){let e=i.$implicit,t=i.rowIndex,p=u();l(3),v(" ",p.currentPage*p.pageSize+t+1," "),l(3),C(e.code),l(4),C(e.nom),l(3),v("",pe(14,11,e.description,0,60)," "),l(2),m("ngIf",e.description.length>60),l(3),C(p.formatCurrency(e.prixXOF,"XOF")),l(3),C(p.formatCurrency(e.prixEURO,"EUR")),l(2),m("value",e.active?"Actif":"Inactif")("severity",e.active?"success":"danger"),l(5),m("icon",e.active?"pi pi-check":"pi pi-times")("pTooltip",e.active?"D\xE9sactiver":"Activer")}}function Je(a,i){if(a&1){let e=N();o(0,"button",44),d("click",function(){O(e);let p=u(2);return h(p.clearFilters())}),n()}}function et(a,i){if(a&1&&(o(0,"tr")(1,"td",40)(2,"div",41),c(3,"i",42),o(4,"h4"),r(5,"Aucune op\xE9ration trouv\xE9e"),n(),o(6,"p"),r(7),n(),g(8,Je,1,0,"button",43),n()()()),a&2){let e=u();l(7),C(e.getEmptyMessage()),l(),m("ngIf",e.hasActiveFilters())}}var V=class a{constructor(i,e,t,p){this.operationService=i;this.confirmationService=e;this.messageService=t;this.logger=p}operationEvent=new b;operations=[];loading=!1;totalRecords=0;currentPage=0;pageSize=10;searchTerm="";selectedStatus=null;statusOptions=[{label:"Actif",value:!0},{label:"Inactif",value:!1}];ngOnInit(){this.loadOperations()}loadOperations(){this.loading=!0;let i={search:this.searchTerm||void 0,active:this.selectedStatus!==null?this.selectedStatus:void 0,page:this.currentPage,size:this.pageSize};this.operationService.getOperations(i).subscribe({next:e=>{this.operations=e.operations,this.totalRecords=e.total,this.loading=!1,this.logger.debug(`${e.operations.length} op\xE9rations charg\xE9es`)},error:e=>{this.loading=!1,this.logger.error("Erreur lors du chargement des op\xE9rations",e)}})}onLazyLoad(i){this.currentPage=Math.floor(i.first/i.rows),this.pageSize=i.rows,this.loadOperations()}onSearch(){this.currentPage=0,this.loadOperations()}onFilter(){this.currentPage=0,this.loadOperations()}onView(i){console.log("\u{1F504} onView() appel\xE9 pour:",i.nom),this.operationEvent.emit({type:"view",operation:i}),console.log("\u{1F4E4} \xC9v\xE9nement view \xE9mis")}onEdit(i){console.log("\u{1F504} onEdit() appel\xE9 pour:",i.nom),this.operationEvent.emit({type:"edit",operation:i}),console.log("\u{1F4E4} \xC9v\xE9nement edit \xE9mis")}onDelete(i){this.confirmationService.confirm({key:R,message:`\xCAtes-vous s\xFBr de vouloir supprimer l'op\xE9ration "${i.nom}" ?`,header:"Confirmation de suppression",icon:"pi pi-exclamation-triangle",acceptLabel:"Oui, supprimer",rejectLabel:"Annuler",accept:()=>{this.deleteOperation(i)}})}onToggleStatus(i){let e=i.active?"d\xE9sactiver":"activer";this.confirmationService.confirm({message:`Voulez-vous ${e} l'op\xE9ration "${i.nom}" ?`,header:"Confirmation",icon:"pi pi-question-circle",acceptLabel:`Oui, ${e}`,rejectLabel:"Annuler",accept:()=>{this.toggleOperationStatus(i)}})}deleteOperation(i){this.operationService.deleteOperation(i.id).subscribe({next:()=>{this.messageService.add({key:R,severity:"success",summary:"Succ\xE8s",detail:`Op\xE9ration "${i.nom}" supprim\xE9e avec succ\xE8s`}),this.loadOperations()},error:e=>{this.logger.error("Erreur lors de la suppression",e)}})}toggleOperationStatus(i){this.operationService.toggleOperationStatus(i.id).subscribe({next:e=>{let t=e.active?"activ\xE9e":"d\xE9sactiv\xE9e";this.messageService.add({key:R,severity:"success",summary:"Succ\xE8s",detail:`Op\xE9ration "${e.nom}" ${t} avec succ\xE8s`}),this.loadOperations()},error:e=>{this.logger.error("Erreur lors du changement de statut",e)}})}hasActiveFilters(){return!!(this.searchTerm||this.selectedStatus!==null)}clearFilters(){this.searchTerm="",this.selectedStatus=null,this.currentPage=0,this.loadOperations(),this.messageService.add({key:R,severity:"info",summary:"Filtres effac\xE9s",detail:"Tous les filtres ont \xE9t\xE9 supprim\xE9s"})}getEmptyMessage(){return this.hasActiveFilters()?"Aucune op\xE9ration ne correspond \xE0 vos crit\xE8res de recherche.":"Aucune op\xE9ration n'a \xE9t\xE9 enregistr\xE9e pour le moment."}formatCurrency(i,e){return e==="XOF"?new Intl.NumberFormat("fr-FR",{style:"currency",currency:"XOF",minimumFractionDigits:0,maximumFractionDigits:0}).format(i).replace("XOF","XOF"):new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR",minimumFractionDigits:2,maximumFractionDigits:2}).format(i)}OPERATION_KEY=R;static \u0275fac=function(e){return new(e||a)(f(k),f(me),f(z),f(D))};static \u0275cmp=x({type:a,selectors:[["app-operation-list"]],outputs:{operationEvent:"operationEvent"},decls:15,vars:14,consts:[[1,"operation-list"],[1,"card"],[1,"flex","flex-col","md:flex-row","gap-3","mb-4"],[1,"flex-1"],["iconPosition","left"],["pInputText","","type","text","placeholder","Rechercher par nom, description ou code...",1,"w-full",3,"ngModelChange","input","ngModel"],[1,"pi","pi-search"],[1,"flex","gap-2"],["placeholder","Tous les statuts","styleClass","w-10rem",3,"ngModelChange","onChange","ngModel","options","showClear"],["sortMode","single","responsiveLayout","scroll","currentPageReportTemplate","Affichage de {first} \xE0 {last} sur {totalRecords} op\xE9rations","styleClass","p-datatable-gridlines",3,"onLazyLoad","value","loading","paginator","rows","totalRecords","lazy","showCurrentPageReport","rowsPerPageOptions"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["header","Confirmation","acceptButtonStyleClass","p-button-danger",3,"key"],[2,"width","3rem"],["pSortableColumn","code"],["field","code"],["pSortableColumn","nom"],["field","nom"],["pSortableColumn","prixXOF"],["field","prixXOF"],["pSortableColumn","prixEURO"],["field","prixEURO"],["pSortableColumn","actif"],["field","actif"],[2,"width","12rem"],[1,"font-medium","text-color-secondary"],[1,"font-semibold","operation-code"],[1,"flex","flex-column"],[1,"font-semibold"],[1,"operation-description"],[4,"ngIf"],[1,"font-semibold","price-xof"],[1,"font-semibold","price-euro"],[3,"value","severity"],[1,"flex","gap-1"],["pButton","","type","button","icon","pi pi-eye","pTooltip","Voir les d\xE9tails","tooltipPosition","top",1,"p-button-rounded","p-button-text","p-button-sm",3,"click"],["pButton","","type","button","icon","pi pi-pencil","pTooltip","Modifier","tooltipPosition","top",1,"p-button-rounded","p-button-text","p-button-sm",2,"color","var(--svs-accent)",3,"click"],["pButton","","type","button","tooltipPosition","top",1,"p-button-rounded","p-button-text","p-button-sm",2,"color","var(--svs-primary-light)",3,"click","icon","pTooltip"],["pButton","","type","button","icon","pi pi-trash","pTooltip","Supprimer","tooltipPosition","top",1,"p-button-rounded","p-button-text","p-button-sm","p-button-danger",3,"click"],["colspan","8",1,"text-center"],[1,"empty-state"],[1,"pi","pi-info-circle","empty-icon"],["pButton","","type","button","label","Effacer les filtres","icon","pi pi-filter-slash","class","p-button-text",3,"click",4,"ngIf"],["pButton","","type","button","label","Effacer les filtres","icon","pi pi-filter-slash",1,"p-button-text",3,"click"]],template:function(e,t){e&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"p-iconfield",4)(5,"input",5),F("ngModelChange",function(s){return P(t.searchTerm,s)||(t.searchTerm=s),s}),d("input",function(){return t.onSearch()}),n(),c(6,"p-inputicon",6),n()(),o(7,"div",7)(8,"p-dropdown",8),F("ngModelChange",function(s){return P(t.selectedStatus,s)||(t.selectedStatus=s),s}),d("onChange",function(){return t.onFilter()}),n()()()(),o(9,"div",1)(10,"p-table",9),d("onLazyLoad",function(s){return t.onLazyLoad(s)}),g(11,Ye,22,0,"ng-template",10)(12,Ze,30,15,"ng-template",11)(13,et,9,2,"ng-template",12),n()()(),c(14,"p-confirmDialog",13)),e&2&&(l(5),S("ngModel",t.searchTerm),l(3),S("ngModel",t.selectedStatus),m("options",t.statusOptions)("showClear",!0),l(2),m("value",t.operations)("loading",t.loading)("paginator",!0)("rows",t.pageSize)("totalRecords",t.totalRecords)("lazy",!0)("showCurrentPageReport",!0)("rowsPerPageOptions",E(13,Ke)),l(4),oe("key",t.OPERATION_KEY))},dependencies:[y,w,se,Pe,W,H,xe,Ne,ke,ce,Re,Le,T,I,G,$,ze,Ve,X,U,q,j,ge,ue,Te,De],styles:[".operation-list[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{background:var(--svs-surface);border:1px solid var(--svs-surface-dark);border-radius:6px;padding:1.5rem;margin-bottom:1rem}.operation-list[_ngcontent-%COMP%]   .operation-code[_ngcontent-%COMP%]{color:var(--svs-primary);font-family:Courier New,monospace;font-size:.9rem}.operation-list[_ngcontent-%COMP%]   .operation-description[_ngcontent-%COMP%]{color:var(--svs-text);font-size:.9rem;line-height:1.3}.operation-list[_ngcontent-%COMP%]   .price-xof[_ngcontent-%COMP%]{color:#059669}.operation-list[_ngcontent-%COMP%]   .price-euro[_ngcontent-%COMP%]{color:var(--svs-accent)}.operation-list[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{padding:3rem 1rem;text-align:center}.operation-list[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:3rem;color:var(--svs-text);opacity:.5;margin-bottom:1rem}.operation-list[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:var(--svs-text);margin:0 0 .5rem;font-size:1.25rem}.operation-list[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--svs-text);opacity:.7;margin:0 0 1rem}.operation-list[_ngcontent-%COMP%]     .p-datatable .p-datatable-header{background:var(--svs-surface);border-color:var(--svs-surface-dark)}.operation-list[_ngcontent-%COMP%]     .p-datatable .p-datatable-thead>tr>th{background:var(--svs-surface);color:var(--svs-text);border-color:var(--svs-surface-dark);font-weight:600}.operation-list[_ngcontent-%COMP%]     .p-datatable .p-datatable-tbody>tr>td{border-color:var(--svs-surface-dark)}.operation-list[_ngcontent-%COMP%]     .p-datatable .p-datatable-tbody>tr:hover{background:var(--svs-surface-dark)}.operation-list[_ngcontent-%COMP%]     .p-button.p-button-raised{background-color:var(--svs-primary);border-color:var(--svs-primary)}.operation-list[_ngcontent-%COMP%]     .p-button.p-button-raised:hover{background-color:var(--svs-primary-light);border-color:var(--svs-primary-light)}.operation-list[_ngcontent-%COMP%]     .p-tag.p-tag-success{background-color:#10b981;color:#fff}.operation-list[_ngcontent-%COMP%]     .p-tag.p-tag-danger{background-color:#ef4444;color:#fff}"]})};function it(a,i){a&1&&(o(0,"small",24),r(1," Le nom de l'op\xE9ration est obligatoire "),n())}function ot(a,i){a&1&&(o(0,"span"),r(1," Le code est obligatoire "),n())}function nt(a,i){a&1&&(o(0,"span"),r(1," Format invalide (ex: PIL-ENT-001) "),n())}function rt(a,i){if(a&1&&(o(0,"small",24),g(1,ot,2,0,"span",25)(2,nt,2,0,"span",25),n()),a&2){let e,t,p=u();l(),m("ngIf",(e=p.operationForm.get("code"))==null?null:e.hasError("required")),l(),m("ngIf",(t=p.operationForm.get("code"))==null?null:t.hasError("pattern"))}}function at(a,i){a&1&&(o(0,"small",24),r(1," La description est obligatoire "),n())}function lt(a,i){a&1&&(o(0,"span"),r(1," Le prix en XOF est obligatoire "),n())}function pt(a,i){a&1&&(o(0,"span"),r(1," Le prix doit \xEAtre positif "),n())}function st(a,i){if(a&1&&(o(0,"small",24),g(1,lt,2,0,"span",25)(2,pt,2,0,"span",25),n()),a&2){let e,t,p=u();l(),m("ngIf",(e=p.operationForm.get("prixXOF"))==null?null:e.hasError("required")),l(),m("ngIf",(t=p.operationForm.get("prixXOF"))==null?null:t.hasError("min"))}}function mt(a,i){a&1&&(o(0,"span"),r(1," Le prix en EURO est obligatoire "),n())}function ct(a,i){a&1&&(o(0,"span"),r(1," Le prix doit \xEAtre positif "),n())}function dt(a,i){if(a&1&&(o(0,"small",24),g(1,mt,2,0,"span",25)(2,ct,2,0,"span",25),n()),a&2){let e,t,p=u();l(),m("ngIf",(e=p.operationForm.get("prixEURO"))==null?null:e.hasError("required")),l(),m("ngIf",(t=p.operationForm.get("prixEURO"))==null?null:t.hasError("min"))}}function ut(a,i){if(a&1&&(o(0,"div",26)(1,"div",27),c(2,"i",28),o(3,"span",29),r(4),n()()()),a&2){let e=u();l(4),v(" Taux de change calcul\xE9 : 1 EUR = ",e.getCalculatedRate()," XOF ")}}var K=class a{constructor(i,e,t,p){this.fb=i;this.operationService=e;this.messageService=t;this.logger=p;this.initForm()}operation=null;formSubmit=new b;formCancel=new b;set visible(i){console.log("\u{1F441}\uFE0F FormComponent visible =",i),this._visible=i}_visible=!1;get visible(){return this._visible}operationForm;loading=!1;isEditMode=!1;exchangeRate=656;ngOnInit(){this.initForm(),this.exchangeRate=this.operationService.getExchangeRate()}ngOnChanges(i){console.log("\u{1F300} OperationForm ngOnChanges",i),i.operation&&this.operationForm&&this.updateForm()}initForm(){this.operationForm=this.fb.group({nom:["",[_.required,_.minLength(2)]],description:["",[_.required,_.minLength(10)]],code:["",[_.required,_.pattern(/^[A-Z]{3}-[A-Z]{3}-\d{3}$/)]],prixXOF:[0,[_.required,_.min(0)]],prixEURO:[0,[_.required,_.min(0)]]}),this.updateForm()}updateForm(){this.operation?(this.isEditMode=!0,this.operationForm.patchValue({nom:this.operation.nom,description:this.operation.description,code:this.operation.code,prixXOF:this.operation.prixXOF,prixEURO:this.operation.prixEURO})):(this.isEditMode=!1,this.operationForm.reset({nom:"",description:"",code:"",prixXOF:0,prixEURO:0}))}isFieldInvalid(i){let e=this.operationForm.get(i);return!!(e&&e.invalid&&(e.dirty||e.touched))}onCodeChange(i){let e=i.target.value.toUpperCase();this.operationForm.patchValue({code:e},{emitEvent:!1})}onPrixXOFChange(i){let e=i.value||0;if(e>0&&this.exchangeRate>0){let t=Math.round(e/this.exchangeRate*100)/100;this.operationForm.patchValue({prixEURO:t},{emitEvent:!1})}}onPrixEUROChange(i){let e=i.value||0;if(e>0&&this.exchangeRate>0){let t=Math.round(e*this.exchangeRate);this.operationForm.patchValue({prixXOF:t},{emitEvent:!1})}}showExchangeRate(){let i=this.operationForm.get("prixXOF")?.value||0,e=this.operationForm.get("prixEURO")?.value||0;return i>0&&e>0}getCalculatedRate(){let i=this.operationForm.get("prixXOF")?.value||0,e=this.operationForm.get("prixEURO")?.value||0;if(e>0){let t=Math.round(i/e);return new Intl.NumberFormat("fr-FR").format(t)}return new Intl.NumberFormat("fr-FR").format(this.exchangeRate)}onSubmit(){if(this.operationForm.valid){this.loading=!0;let i=this.operationForm.value;if(this.isEditMode&&this.operation){let e=ee({id:this.operation.id},i);this.operationService.updateOperation(e).subscribe({next:t=>{this.messageService.add({severity:"success",summary:"Succ\xE8s",detail:`Op\xE9ration "${t.nom}" modifi\xE9e avec succ\xE8s`}),this.formSubmit.emit(t),this.loading=!1,this.resetForm()},error:t=>{this.loading=!1,this.logger.error("Erreur lors de la modification",t)}})}else{let e=i;this.operationService.createOperation(e).subscribe({next:t=>{this.messageService.add({severity:"success",summary:"Succ\xE8s",detail:`Op\xE9ration "${t.nom}" cr\xE9\xE9e avec succ\xE8s`}),this.formSubmit.emit(t),this.loading=!1,this.resetForm()},error:t=>{this.loading=!1,this.logger.error("Erreur lors de la cr\xE9ation",t)}})}}else Object.keys(this.operationForm.controls).forEach(i=>{this.operationForm.get(i)?.markAsTouched()}),this.messageService.add({severity:"warn",summary:"Attention",detail:"Veuillez corriger les erreurs dans le formulaire"})}onCancel(){this.resetForm(),this.formCancel.emit()}resetForm(){this.operationForm.reset({nom:"",description:"",code:"",prixXOF:0,prixEURO:0}),this.isEditMode=!1,this.operation=null}static \u0275fac=function(e){return new(e||a)(f(Se),f(k),f(z),f(D))};static \u0275cmp=x({type:a,selectors:[["app-operation-form"]],inputs:{operation:"operation",visible:"visible"},outputs:{formSubmit:"formSubmit",formCancel:"formCancel"},features:[ie],decls:52,vars:25,consts:[[1,"operation-form",3,"ngSubmit","formGroup"],[1,"form-section"],[1,"section-title"],[1,"pi","pi-cog","mr-2"],[1,"grid"],[1,"col-12","md:col-6"],["for","nom",1,"field-label"],[1,"required"],["id","nom","pInputText","","formControlName","nom","placeholder","Ex: Pilotage d'entr\xE9e",1,"w-full"],["class","field-error",4,"ngIf"],["for","code",1,"field-label"],["id","code","pInputText","","formControlName","code","placeholder","Ex: PIL-ENT-001",1,"w-full","code-input",3,"input"],[1,"col-12"],["for","description",1,"field-label"],["id","description","pInputTextarea","","formControlName","description","placeholder","Description d\xE9taill\xE9e de l'op\xE9ration...","rows","3",1,"w-full"],[1,"pi","pi-money-bill","mr-2"],["for","prixXOF",1,"field-label"],["id","prixXOF","formControlName","prixXOF","mode","currency","currency","XOF","locale","fr-FR","placeholder","0","styleClass","w-full",3,"onInput","min","maxFractionDigits"],["for","prixEURO",1,"field-label"],["id","prixEURO","formControlName","prixEURO","mode","currency","currency","EUR","locale","fr-FR","placeholder","0.00","styleClass","w-full",3,"onInput","min","maxFractionDigits"],["class","exchange-rate-info",4,"ngIf"],[1,"form-actions"],["type","button","pButton","","label","Annuler","icon","pi pi-times",1,"p-button-text",3,"click"],["type","submit","pButton","",1,"ml-2",2,"background-color","var(--svs-primary)","border-color","var(--svs-primary)",3,"label","icon","loading","disabled"],[1,"field-error"],[4,"ngIf"],[1,"exchange-rate-info"],[1,"flex","align-items-center","gap-2"],[1,"pi","pi-info-circle","text-color-secondary"],[1,"text-sm","text-color-secondary"]],template:function(e,t){e&1&&(o(0,"form",0),d("ngSubmit",function(){return t.onSubmit()}),o(1,"div",1)(2,"h4",2),c(3,"i",3),r(4," Informations g\xE9n\xE9rales "),n(),o(5,"div",4)(6,"div",5)(7,"label",6),r(8," Nom de l'op\xE9ration "),o(9,"span",7),r(10,"*"),n()(),c(11,"input",8),g(12,it,2,0,"small",9),n(),o(13,"div",5)(14,"label",10),r(15," Code/R\xE9f\xE9rence "),o(16,"span",7),r(17,"*"),n()(),o(18,"input",11),d("input",function(s){return t.onCodeChange(s)}),n(),g(19,rt,3,2,"small",9),n()(),o(20,"div",4)(21,"div",12)(22,"label",13),r(23," Description "),o(24,"span",7),r(25,"*"),n()(),c(26,"textarea",14),g(27,at,2,0,"small",9),n()()(),c(28,"p-divider"),o(29,"div",1)(30,"h4",2),c(31,"i",15),r(32," Tarification "),n(),o(33,"div",4)(34,"div",5)(35,"label",16),r(36," Prix en XOF "),o(37,"span",7),r(38,"*"),n()(),o(39,"p-inputNumber",17),d("onInput",function(s){return t.onPrixXOFChange(s)}),n(),g(40,st,3,2,"small",9),n(),o(41,"div",5)(42,"label",18),r(43," Prix en EURO "),o(44,"span",7),r(45,"*"),n()(),o(46,"p-inputNumber",19),d("onInput",function(s){return t.onPrixEUROChange(s)}),n(),g(47,dt,3,2,"small",9),n()(),g(48,ut,5,1,"div",20),n(),o(49,"div",21)(50,"button",22),d("click",function(){return t.onCancel()}),n(),c(51,"button",23),n()()),e&2&&(m("formGroup",t.operationForm),l(11),M("ng-invalid",t.isFieldInvalid("nom")),l(),m("ngIf",t.isFieldInvalid("nom")),l(6),M("ng-invalid",t.isFieldInvalid("code")),l(),m("ngIf",t.isFieldInvalid("code")),l(7),M("ng-invalid",t.isFieldInvalid("description")),l(),m("ngIf",t.isFieldInvalid("description")),l(12),M("ng-invalid",t.isFieldInvalid("prixXOF")),m("min",0)("maxFractionDigits",0),l(),m("ngIf",t.isFieldInvalid("prixXOF")),l(6),M("ng-invalid",t.isFieldInvalid("prixEURO")),m("min",0)("maxFractionDigits",2),l(),m("ngIf",t.isFieldInvalid("prixEURO")),l(),m("ngIf",t.showExchangeRate()),l(3),m("label",t.isEditMode?"Modifier":"Cr\xE9er")("icon",t.isEditMode?"pi pi-check":"pi pi-plus")("loading",t.loading)("disabled",t.operationForm.invalid))},dependencies:[y,w,Fe,ye,W,H,be,Ee,Me,T,I,G,$,Ie,we,B,A],styles:[".operation-form[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]{margin-bottom:1.5rem}.operation-form[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{color:var(--svs-primary);font-size:1.1rem;font-weight:600;margin-bottom:1rem;display:flex;align-items:center}.operation-form[_ngcontent-%COMP%]   .field-label[_ngcontent-%COMP%]{display:block;font-weight:500;margin-bottom:.5rem;color:var(--svs-text)}.operation-form[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{color:#ef4444}.operation-form[_ngcontent-%COMP%]   .field-error[_ngcontent-%COMP%]{color:#ef4444;display:block;margin-top:.25rem;font-size:.875rem}.operation-form[_ngcontent-%COMP%]   .code-input[_ngcontent-%COMP%]{text-transform:uppercase;font-family:Courier New,monospace}.operation-form[_ngcontent-%COMP%]   .exchange-rate-info[_ngcontent-%COMP%]{margin-top:1rem;padding:.75rem;background:var(--svs-surface-dark);border-radius:4px;border-left:3px solid var(--svs-accent)}.operation-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:2rem;padding-top:1rem;border-top:1px solid var(--svs-surface-dark)}.operation-form[_ngcontent-%COMP%]     .ng-invalid.ng-touched{border-color:#ef4444!important}.operation-form[_ngcontent-%COMP%]     .p-inputnumber.ng-invalid.ng-touched .p-inputtext{border-color:#ef4444!important}.operation-form[_ngcontent-%COMP%]     .p-button:disabled{opacity:.6}.operation-form[_ngcontent-%COMP%]     .p-inputnumber-input{text-align:right}"]})};var gt=()=>({"background-color":"var(--svs-primary)",color:"white"});function ft(a,i){if(a&1&&(o(0,"div",31)(1,"div",32),c(2,"i",33),o(3,"span",34),r(4),n()()()),a&2){let e=u(2);l(4),v(" 1 EUR = ",e.getExchangeRate()," XOF ")}}function vt(a,i){if(a&1){let e=N();o(0,"div",1)(1,"div",2)(2,"div",3),c(3,"p-avatar",4),o(4,"div")(5,"h3",5),r(6),n(),o(7,"p",6),r(8),n()()(),o(9,"div",7),c(10,"p-tag",8),n()(),c(11,"p-divider"),o(12,"div",9)(13,"h4",10),c(14,"i",11),r(15," Description "),n(),o(16,"div",12)(17,"p"),r(18),n()()(),c(19,"p-divider"),o(20,"div",9)(21,"h4",10),c(22,"i",13),r(23," Tarification "),n(),o(24,"div",14)(25,"div",15)(26,"div",16)(27,"div",17),c(28,"i",18),o(29,"span",19),r(30,"Franc CFA (XOF)"),n()(),o(31,"div",20),r(32),n()()(),o(33,"div",15)(34,"div",21)(35,"div",17),c(36,"i",22),o(37,"span",19),r(38,"Euro (EUR)"),n()(),o(39,"div",20),r(40),n()()()(),g(41,ft,5,1,"div",23),n(),c(42,"p-divider"),o(43,"div",9)(44,"h4",10),c(45,"i",24),r(46," Informations syst\xE8me "),n(),o(47,"div",14)(48,"div",15)(49,"div",25)(50,"label",26),r(51,"Date de cr\xE9ation"),n(),o(52,"div",27),r(53),n()()(),o(54,"div",15)(55,"div",25)(56,"label",26),r(57,"Derni\xE8re modification"),n(),o(58,"div",27),r(59),n()()()()(),o(60,"div",28)(61,"button",29),d("click",function(){O(e);let p=u();return h(p.onEdit())}),n(),o(62,"button",30),d("click",function(){O(e);let p=u();return h(p.onClose())}),n()()()}if(a&2){let e=u();l(3),L(E(13,gt)),l(3),C(e.operation.nom),l(2),C(e.operation.code),l(2),m("value",e.operation.active?"Actif":"Inactif")("severity",e.operation.active?"success":"danger")("rounded",!0),l(8),C(e.operation.description),l(14),v(" ",e.formatCurrency(e.operation.prixXOF,"XOF")," "),l(8),v(" ",e.formatCurrency(e.operation.prixEURO,"EUR")," "),l(),m("ngIf",e.operation.prixXOF>0),l(12),v(" ",e.formatDate(e.operation.createdAt)," "),l(6),v(" ",e.formatDate(e.operation.updatedAt)," ")}}var Y=class a{operation=null;editClick=new b;closeClick=new b;operationService=te(k);formatDate(i){if(!i)return"";let e=new Date(i);return new Intl.DateTimeFormat("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(e)}formatCurrency(i,e){return Ue.formatCurrency(i,e)}getExchangeRate(){return this.operationService.getExchangeRate().toString()}onEdit(){this.operation&&this.editClick.emit(this.operation)}onClose(){this.closeClick.emit()}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=x({type:a,selectors:[["app-operation-detail"]],inputs:{operation:"operation"},outputs:{editClick:"editClick",closeClick:"closeClick"},decls:1,vars:1,consts:[["class","operation-detail",4,"ngIf"],[1,"operation-detail"],[1,"operation-header"],[1,"flex","align-items-center","gap-3"],["icon","pi pi-cog","size","large","shape","circle"],[1,"operation-name"],[1,"operation-code"],[1,"operation-status"],[3,"value","severity","rounded"],[1,"detail-section"],[1,"section-title"],[1,"pi","pi-file-text","mr-2"],[1,"description-content"],[1,"pi","pi-money-bill","mr-2"],[1,"grid"],[1,"col-12","md:col-6"],[1,"price-card","xof-card"],[1,"price-header"],[1,"pi","pi-money-bill"],[1,"currency-label"],[1,"price-amount"],[1,"price-card","euro-card"],[1,"pi","pi-euro"],["class","exchange-rate-display",4,"ngIf"],[1,"pi","pi-info-circle","mr-2"],[1,"detail-field"],[1,"field-label"],[1,"field-value"],[1,"detail-actions"],["pButton","","type","button","label","Modifier","icon","pi pi-pencil",1,"p-button-raised",2,"background-color","var(--svs-accent)","border-color","var(--svs-accent)",3,"click"],["pButton","","type","button","label","Fermer","icon","pi pi-times",1,"p-button-text","ml-2",3,"click"],[1,"exchange-rate-display"],[1,"flex","align-items-center","justify-content-center","gap-2"],[1,"pi","pi-arrow-right-arrow-left","text-color-secondary"],[1,"exchange-text"]],template:function(e,t){e&1&&g(0,vt,63,14,"div",0),e&2&&m("ngIf",t.operation)},dependencies:[y,w,T,I,X,U,B,A,ve,fe],styles:[".operation-detail[_ngcontent-%COMP%]   .operation-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:1.5rem}.operation-detail[_ngcontent-%COMP%]   .operation-header[_ngcontent-%COMP%]   .operation-name[_ngcontent-%COMP%]{margin:0;color:var(--svs-primary);font-size:1.5rem;font-weight:600}.operation-detail[_ngcontent-%COMP%]   .operation-header[_ngcontent-%COMP%]   .operation-code[_ngcontent-%COMP%]{margin:.25rem 0 0;color:var(--svs-text);font-size:1rem;font-family:Courier New,monospace;opacity:.8}.operation-detail[_ngcontent-%COMP%]   .detail-section[_ngcontent-%COMP%]{margin-bottom:2rem}.operation-detail[_ngcontent-%COMP%]   .detail-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{color:var(--svs-primary);font-size:1.1rem;font-weight:600;margin-bottom:1rem;display:flex;align-items:center}.operation-detail[_ngcontent-%COMP%]   .description-content[_ngcontent-%COMP%]{background:var(--svs-surface);border:1px solid var(--svs-surface-dark);border-radius:6px;padding:1rem}.operation-detail[_ngcontent-%COMP%]   .description-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:var(--svs-text);line-height:1.6}.operation-detail[_ngcontent-%COMP%]   .price-card[_ngcontent-%COMP%]{background:var(--svs-surface);border:1px solid var(--svs-surface-dark);border-radius:8px;padding:1.5rem;text-align:center;position:relative;overflow:hidden}.operation-detail[_ngcontent-%COMP%]   .price-card.xof-card[_ngcontent-%COMP%]{border-left:4px solid #059669}.operation-detail[_ngcontent-%COMP%]   .price-card.xof-card[_ngcontent-%COMP%]   .price-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .operation-detail[_ngcontent-%COMP%]   .price-card.xof-card[_ngcontent-%COMP%]   .price-amount[_ngcontent-%COMP%]{color:#059669}.operation-detail[_ngcontent-%COMP%]   .price-card.euro-card[_ngcontent-%COMP%]{border-left:4px solid var(--svs-accent)}.operation-detail[_ngcontent-%COMP%]   .price-card.euro-card[_ngcontent-%COMP%]   .price-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .operation-detail[_ngcontent-%COMP%]   .price-card.euro-card[_ngcontent-%COMP%]   .price-amount[_ngcontent-%COMP%]{color:var(--svs-accent)}.operation-detail[_ngcontent-%COMP%]   .price-card[_ngcontent-%COMP%]   .price-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:.5rem;margin-bottom:1rem}.operation-detail[_ngcontent-%COMP%]   .price-card[_ngcontent-%COMP%]   .price-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.2rem}.operation-detail[_ngcontent-%COMP%]   .price-card[_ngcontent-%COMP%]   .price-header[_ngcontent-%COMP%]   .currency-label[_ngcontent-%COMP%]{font-weight:500;color:var(--svs-text);font-size:.9rem}.operation-detail[_ngcontent-%COMP%]   .price-card[_ngcontent-%COMP%]   .price-amount[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;margin:0}.operation-detail[_ngcontent-%COMP%]   .exchange-rate-display[_ngcontent-%COMP%]{margin-top:1.5rem;padding:1rem;background:var(--svs-surface-dark);border-radius:6px;text-align:center}.operation-detail[_ngcontent-%COMP%]   .exchange-rate-display[_ngcontent-%COMP%]   .exchange-text[_ngcontent-%COMP%]{color:var(--svs-text);font-weight:500;font-size:1rem}.operation-detail[_ngcontent-%COMP%]   .detail-field[_ngcontent-%COMP%]{margin-bottom:1rem}.operation-detail[_ngcontent-%COMP%]   .detail-field[_ngcontent-%COMP%]   .field-label[_ngcontent-%COMP%]{display:block;font-weight:500;color:var(--svs-text);font-size:.875rem;opacity:.8;margin-bottom:.25rem}.operation-detail[_ngcontent-%COMP%]   .detail-field[_ngcontent-%COMP%]   .field-value[_ngcontent-%COMP%]{color:var(--svs-text);font-size:1rem}.operation-detail[_ngcontent-%COMP%]   .detail-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:2rem;padding-top:1rem;border-top:1px solid var(--svs-surface-dark)}.operation-detail[_ngcontent-%COMP%]     .p-tag.p-tag-success{background-color:#10b981;color:#fff}.operation-detail[_ngcontent-%COMP%]     .p-tag.p-tag-danger{background-color:#ef4444;color:#fff}"]})};var _t=()=>({width:"90vw",maxWidth:"700px"}),Ct=()=>({width:"90vw",maxWidth:"600px"}),Q=class a{constructor(i){this.logger=i}selectedOperation=null;showFormDialog=!1;showDetailDialog=!1;formDialogTitle="";operationListComponent;onCreate(){this.selectedOperation=null,this.formDialogTitle="Cr\xE9er une op\xE9ration",this.showFormDialog=!0}onOperationEvent(i){switch(console.log("\u{1F4E5} Event re\xE7u dans OperationsComponent",i),i.type){case"edit":this.selectedOperation=i.operation??null,this.formDialogTitle="Modifier une op\xE9ration",this.showFormDialog=!0;break;case"view":this.selectedOperation=i.operation??null,this.showDetailDialog=!0;break}}onFormCancel(){this.showFormDialog=!1}onFormDialogHide(){this.showFormDialog=!1}onFormSubmit(i){this.showFormDialog=!1,this.operationListComponent?.loadOperations()}onDetailCloseClick(){this.showDetailDialog=!1}onDetailEditClick(i){this.selectedOperation=i,this.formDialogTitle="Modifier une op\xE9ration",this.showDetailDialog=!1,this.showFormDialog=!0}onDetailDialogHide(){this.showDetailDialog=!1}static \u0275fac=function(e){return new(e||a)(f(D))};static \u0275cmp=x({type:a,selectors:[["app-operations"]],viewQuery:function(e,t){if(e&1&&ne(V,7),e&2){let p;re(p=ae())&&(t.operationListComponent=p.first)}},decls:19,vars:20,consts:[[1,"operations-page"],[1,"card","mb-5"],[1,"flex","flex-col","lg:flex-row","lg:justify-between","lg:align-middle"],[1,"mb-3","lg:mb-0"],[1,"flex","align-items-center","mb-2"],[1,"pi","pi-cog","text-blue-600","text-2xl","mr-3"],[1,"text-2xl","font-semibold","text-blue-900","m-0"],[1,"text-600","m-0","line-height-3"],[1,"flex","flex-col","sm:flex-row"],["label","Nouvelle op\xE9ration","icon","pi pi-plus",1,"p-button-primary",3,"click"],[3,"operationEvent"],["styleClass","operation-dialog",3,"visibleChange","onHide","visible","modal","draggable","resizable","closable","header"],[3,"formSubmit","formCancel","operation","visible"],["header","D\xE9tails de l'op\xE9ration","styleClass","operation-dialog",3,"visibleChange","onHide","visible","modal","draggable","resizable","closable"],[3,"editClick","closeClick","operation"]],template:function(e,t){e&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),c(5,"i",5),o(6,"h1",6),r(7,"Gestion des Types d'op\xE9ration"),n()(),o(8,"p",7),r(9," Suivi et gestion des types d'op\xE9ration "),n()(),o(10,"div",8)(11,"p-button",9),d("click",function(){return t.onCreate()}),n()()()(),o(12,"app-operation-list",10),d("operationEvent",function(s){return t.onOperationEvent(s)}),n(),o(13,"p-dialog",11),F("visibleChange",function(s){return P(t.showFormDialog,s)||(t.showFormDialog=s),s}),d("onHide",function(){return t.onFormDialogHide()}),o(14,"app-operation-form",12),d("formSubmit",function(s){return t.onFormSubmit(s)})("formCancel",function(){return t.onFormCancel()}),n()(),o(15,"p-dialog",13),F("visibleChange",function(s){return P(t.showDetailDialog,s)||(t.showDetailDialog=s),s}),d("onHide",function(){return t.onDetailDialogHide()}),o(16,"app-operation-detail",14),d("editClick",function(s){return t.onDetailEditClick(s)})("closeClick",function(){return t.onDetailCloseClick()}),n()(),c(17,"p-toast")(18,"p-confirmDialog"),n()),e&2&&(l(13),L(E(18,_t)),S("visible",t.showFormDialog),m("modal",!0)("draggable",!1)("resizable",!1)("closable",!0)("header",t.formDialogTitle),l(),m("operation",t.selectedOperation)("visible",t.showFormDialog),l(),L(E(19,Ct)),S("visible",t.showDetailDialog),m("modal",!0)("draggable",!1)("resizable",!1)("closable",!0),l(),m("operation",t.selectedOperation))},dependencies:[y,V,K,Y,Ce,_e,he,Oe,q,j,de],styles:[".operations-page[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]{margin-bottom:2rem}.operations-page[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:var(--svs-primary);font-size:2rem;font-weight:700;margin:0 0 .5rem;display:flex;align-items:center}.operations-page[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]   .page-description[_ngcontent-%COMP%]{color:var(--svs-text);font-size:1rem;margin:0;opacity:.8}.operations-page[_ngcontent-%COMP%]     .operation-dialog .p-dialog-header{background:var(--svs-surface);border-bottom:1px solid var(--svs-surface-dark)}.operations-page[_ngcontent-%COMP%]     .operation-dialog .p-dialog-header .p-dialog-title{color:var(--svs-primary);font-weight:600}.operations-page[_ngcontent-%COMP%]     .operation-dialog .p-dialog-content{background:var(--svs-surface);padding:1.5rem}.operations-page[_ngcontent-%COMP%]     .operation-dialog .p-dialog-footer{background:var(--svs-surface);border-top:1px solid var(--svs-surface-dark)}.operations-page[_ngcontent-%COMP%]     .p-toast .p-toast-message.p-toast-message-success{background-color:#10b981;border-color:#059669;color:#fff}.operations-page[_ngcontent-%COMP%]     .p-toast .p-toast-message.p-toast-message-error{background-color:#ef4444;border-color:#dc2626;color:#fff}.operations-page[_ngcontent-%COMP%]     .p-toast .p-toast-message.p-toast-message-warn{background-color:#f59e0b;border-color:#d97706;color:#fff}.operations-page[_ngcontent-%COMP%]     .p-confirm-dialog .p-dialog-header{background:var(--svs-surface)}.operations-page[_ngcontent-%COMP%]     .p-confirm-dialog .p-dialog-header .p-dialog-title{color:var(--svs-primary)}.operations-page[_ngcontent-%COMP%]     .p-confirm-dialog .p-dialog-content{background:var(--svs-surface)}.operations-page[_ngcontent-%COMP%]     .p-confirm-dialog .p-confirm-dialog-message{color:var(--svs-text)}"]})};var Ii=[{path:"list",component:Q}];export{Ii as default};
