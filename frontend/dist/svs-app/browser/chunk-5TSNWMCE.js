import{l as n,m as g,n as y}from"./chunk-Y5JEGQKB.js";import{a as c,b as h,e as l}from"./chunk-ZXANPB2F.js";import{P as m,U as i,k as s,n as p,w as a}from"./chunk-TX7UWVJS.js";var d=class o{constructor(e,r,t){this.http=e;this.logger=r;this.errorHandler=t}apiBaseUrl=`${n.apiBaseUrl}/${n.apiVersion}`;headers=new c({"Content-Type":"application/json",Accept:"application/json"});getCompanies(e={}){this.logger.info("Appel API - Liste des compagnies",e);let r=new h().set("page",e.page?.toString()||"0").set("size",e.size?.toString()||"10").set("sortBy","nom").set("sortDirection","asc");return e.search&&(r=r.set("search",e.search)),e.pays&&(r=r.set("pays",e.pays)),e.active!==void 0&&(r=r.set("active",e.active.toString())),this.http.get(`${this.apiBaseUrl}/companies`,{headers:this.headers,params:r}).pipe(p(t=>({companies:t.companies,total:t.total,page:t.page,size:t.size})),a(t=>this.handleError(t,"Chargement des compagnies")))}getCompanyById(e){return this.http.get(`${this.apiBaseUrl}/companies/${e}`).pipe(a(r=>this.handleError(r,`Chargement compagnie ID: ${e}`)))}createCompany(e){return this.http.post(`${this.apiBaseUrl}/companies`,e).pipe(a(r=>this.handleError(r,"Cr\xE9ation compagnie")))}updateCompany(e){return this.http.put(`${this.apiBaseUrl}/companies/${e.id}`,e).pipe(a(r=>this.handleError(r,`Mise \xE0 jour compagnie ID: ${e.id}`)))}deleteCompany(e){return this.http.delete(`${this.apiBaseUrl}/companies/${e}`).pipe(p(()=>!0),a(r=>this.handleError(r,`Suppression compagnie ID: ${e}`)))}toggleCompanyStatus(e){return this.http.patch(`${this.apiBaseUrl}/companies/${e}/toggle-status`,{}).pipe(a(r=>this.handleError(r,`Toggle status compagnie ID: ${e}`)))}handleError(e,r){return this.logger.error(`${r} - Erreur`,e),this.errorHandler.handleErrorWithContext(e,r),s(()=>e)}static \u0275fac=function(r){return new(r||o)(i(l),i(g),i(y))};static \u0275prov=m({token:o,factory:o.\u0275fac,providedIn:"root"})};export{d as a};
