import{b as Ve}from"./chunk-I3XMGWCT.js";import{a as Z,b as J}from"./chunk-ZNWXIZSV.js";import{a as ve,b as _e}from"./chunk-G3KA6RIZ.js";import{a as ee}from"./chunk-GEJ5RMR7.js";import{b as Be}from"./chunk-UB2NIRS6.js";import{a as k}from"./chunk-5TSNWMCE.js";import{$ as qe,B as Pe,C as xe,D as Ee,G as Ie,H as we,I as Fe,J as Te,K as De,M as Q,N as U,P as ke,Q as Le,S as Ne,W as ze,X as Ae,Y as Re,aa as K,ba as X,j as he,k as fe,m as w,o as Ce,p as Se,q as be,r as Me,s as ye,t as H,v as $,w as f,y as Y,z as Oe}from"./chunk-Y5JEGQKB.js";import"./chunk-S35HUXPS.js";import{a as W,b as G}from"./chunk-CMB77VUU.js";import{Aa as V,Ba as j,_ as de,ca as q,ga as ge,sa as B,xa as T,ya as ue,za as D}from"./chunk-ZXANPB2F.js";import{Bb as d,Cb as h,Ec as F,Ib as pe,Jb as me,Kb as ce,Kc as I,Ma as a,Na as g,Ob as r,Pb as _,Qb as C,Sb as M,Tb as y,Ub as O,Wb as N,Xa as x,Xb as z,aa as R,ba as S,ca as b,cb as u,ka as P,kb as c,mb as v,nb as E,tb as n,ub as o,vb as m,zb as L}from"./chunk-TX7UWVJS.js";import{a as le}from"./chunk-EQDQRRRY.js";var je=["Cargo","Conteneur","P\xE9trolier","Vraqueur","Passagers","Ro-Ro","Frigorifique","Chimiquier","Gazier","Remorqueur","Pilote"],te=["S\xE9n\xE9gal","France","Liberia","Panama","Marshall Islands","Singapour","Bahamas","Malta","Chypre","Gr\xE8ce"];var et=()=>[10,25,50],tt=s=>({"background-color":s,color:"white"});function it(s,e){s&1&&(n(0,"tr")(1,"th",16),r(2,"#"),o(),n(3,"th",17),r(4," Navire "),m(5,"p-sortIcon",18),o(),n(6,"th",19),r(7," N\xB0 IMO "),m(8,"p-sortIcon",20),o(),n(9,"th"),r(10,"Type & Pavillon"),o(),n(11,"th",21),r(12," Compagnie "),m(13,"p-sortIcon",22),o(),n(14,"th",23),r(15," Statut "),m(16,"p-sortIcon",24),o(),n(17,"th",25),r(18,"Actions"),o()())}function nt(s,e){if(s&1){let t=L();n(0,"tr")(1,"td")(2,"span",26),r(3),o()(),n(4,"td")(5,"div",27)(6,"span",28),r(7),o(),n(8,"small",29),m(9,"i",30),r(10),o()()(),n(11,"td")(12,"div",27)(13,"span",31),r(14),o(),n(15,"small",29),r(16),o()()(),n(17,"td")(18,"div",32),m(19,"p-chip",33)(20,"p-chip",34),o()(),n(21,"td")(22,"span",35),r(23),o()(),n(24,"td"),m(25,"p-tag",36),o(),n(26,"td")(27,"div",37)(28,"button",38),d("click",function(){let l=S(t).$implicit,p=h();return b(p.onView(l))}),o(),n(29,"button",39),d("click",function(){let l=S(t).$implicit,p=h();return b(p.onEdit(l))}),o(),n(30,"button",40),d("click",function(){let l=S(t).$implicit,p=h();return b(p.onToggleStatus(l))}),o(),n(31,"button",41),d("click",function(){let l=S(t).$implicit,p=h();return b(p.onDelete(l))}),o()()()()}if(s&2){let t=e.$implicit,i=e.rowIndex,l=h();a(3),C(" ",l.currentPage*l.pageSize+i+1," "),a(4),_(t.nom),a(3),C("",t.portAttache," "),a(4),_(t.numeroIMO),a(2),C("MMSI: ",t.numeroMMSI,""),a(3),E(z(14,tt,l.getTypeColor(t.typeNavire))),c("label",t.typeNavire),a(),c("label",t.pavillon),a(3),_(l.getCompanyName(t.compagnieId)),a(2),c("value",t.active?"Actif":"Inactif")("severity",t.active?"success":"danger"),a(5),c("icon",t.active?"pi pi-eye-slash":"pi pi-eye")("pTooltip",t.active?"D\xE9sactiver":"Activer")}}function ot(s,e){if(s&1){let t=L();n(0,"button",46),d("click",function(){S(t);let l=h(2);return b(l.clearFilters())}),o()}}function rt(s,e){if(s&1&&(n(0,"tr")(1,"td",42)(2,"div",43),m(3,"i",44),n(4,"h4"),r(5,"Aucun navire trouv\xE9"),o(),n(6,"p"),r(7),o(),u(8,ot,1,0,"button",45),o()()()),s&2){let t=h();a(7),_(t.getEmptyMessage()),a(),c("ngIf",t.hasActiveFilters())}}var A=class s{constructor(e,t,i,l,p){this.shipService=e;this.companyService=t;this.confirmationService=i;this.messageService=l;this.logger=p}shipEvent=new P;ships=[];loading=!1;totalRecords=0;currentPage=0;pageSize=10;searchTerm="";selectedCompany=null;selectedShipType=null;selectedFlag=null;selectedStatus=null;companyOptions=[];shipTypeOptions=[];flagOptions=[];statusOptions=[{label:"Actif",value:!0},{label:"Inactif",value:!1}];companiesMap=new Map;ngOnInit(){this.initializeOptions(),this.loadShips()}initializeOptions(){this.shipTypeOptions=je.map(e=>({label:e,value:e})),this.flagOptions=te.map(e=>({label:e,value:e})),this.companyService.getCompanies().subscribe({next:e=>{this.companyOptions=e.companies.map(t=>({label:t.nom,value:t.id})),e.companies.forEach(t=>{this.companiesMap.set(t.id,t.nom)})},error:e=>{this.logger.error("Erreur lors du chargement des compagnies",e)}})}loadShips(){this.loading=!0;let e={search:this.searchTerm||void 0,compagnieId:this.selectedCompany||void 0,typeNavire:this.selectedShipType||void 0,pavillon:this.selectedFlag||void 0,active:this.selectedStatus!==null?this.selectedStatus:void 0,page:this.currentPage,size:this.pageSize};this.shipService.getShips(e).subscribe({next:t=>{this.ships=t.ships,this.totalRecords=t.total,this.loading=!1,this.logger.debug(`${t.ships.length} navires charg\xE9s`)},error:t=>{this.loading=!1,this.logger.error("Erreur lors du chargement des navires",t)}})}onLazyLoad(e){this.currentPage=Math.floor(e.first/e.rows),this.pageSize=e.rows,this.loadShips()}onSearch(){this.currentPage=0,this.loadShips()}onFilter(){this.currentPage=0,this.loadShips()}onView(e){this.shipEvent.emit({type:"view",ship:e})}onEdit(e){this.shipEvent.emit({type:"edit",ship:e})}onDelete(e){this.confirmationService.confirm({message:`\xCAtes-vous s\xFBr de vouloir supprimer le navire "${e.nom}" ?`,header:"Confirmation de suppression",icon:"pi pi-exclamation-triangle",acceptLabel:"Oui, supprimer",rejectLabel:"Annuler",accept:()=>{this.deleteShip(e)}})}onToggleStatus(e){let t=e.active?"d\xE9sactiver":"activer";this.confirmationService.confirm({message:`Voulez-vous ${t} le navire "${e.nom}" ?`,header:"Confirmation",icon:"pi pi-question-circle",acceptLabel:`Oui, ${t}`,rejectLabel:"Annuler",accept:()=>{this.toggleShipStatus(e)}})}deleteShip(e){this.shipService.deleteShip(e.id).subscribe({next:()=>{this.messageService.add({severity:"success",summary:"Succ\xE8s",detail:`Navire "${e.nom}" supprim\xE9 avec succ\xE8s`}),this.loadShips()},error:t=>{this.logger.error("Erreur lors de la suppression",t)}})}toggleShipStatus(e){this.shipService.toggleShipStatus(e.id).subscribe({next:t=>{let i=t.active?"activ\xE9":"d\xE9sactiv\xE9";this.messageService.add({severity:"success",summary:"Succ\xE8s",detail:`Navire "${t.nom}" ${i} avec succ\xE8s`}),this.loadShips()},error:t=>{this.logger.error("Erreur lors du changement de statut",t)}})}hasActiveFilters(){return!!(this.searchTerm||this.selectedCompany||this.selectedShipType||this.selectedFlag||this.selectedStatus!==null)}clearFilters(){this.searchTerm="",this.selectedCompany=null,this.selectedShipType=null,this.selectedFlag=null,this.selectedStatus=null,this.currentPage=0,this.loadShips(),this.messageService.add({severity:"info",summary:"Filtres effac\xE9s",detail:"Tous les filtres ont \xE9t\xE9 supprim\xE9s"})}getEmptyMessage(){return this.hasActiveFilters()?"Aucun navire ne correspond \xE0 vos crit\xE8res de recherche.":"Aucun navire n'a \xE9t\xE9 enregistr\xE9 pour le moment."}getCompanyName(e){return this.companiesMap.get(e)||"Compagnie inconnue"}getTypeColor(e){return{Conteneur:"#3b82f6",Cargo:"#059669",P\u00E9trolier:"#dc2626",Vraqueur:"#7c2d12",Passagers:"#7c3aed","Ro-Ro":"#ea580c",Frigorifique:"#0891b2",Chimiquier:"#be185d",Gazier:"#4338ca",Remorqueur:"#374151",Pilote:"#1f2937"}[e]||"#6b7280"}formatNumber(e){return new Intl.NumberFormat("fr-FR").format(e)}static \u0275fac=function(t){return new(t||s)(g(ee),g(k),g(de),g(q),g(w))};static \u0275cmp=x({type:s,selectors:[["app-ship-list"]],outputs:{shipEvent:"shipEvent"},decls:17,vars:22,consts:[[1,"ship-list"],[1,"card"],[1,"flex","flex-column","md:flex-row","gap-3","mb-4"],[1,"flex-1"],["iconPosition","left"],["pInputText","","type","text","placeholder","Rechercher par nom, IMO, MMSI, port d'attache...",1,"w-full",3,"ngModelChange","input","ngModel"],[1,"pi","pi-search"],[1,"flex","gap-2","flex-wrap"],["placeholder","Toutes les compagnies","styleClass","w-12rem","optionLabel","label","optionValue","value",3,"ngModelChange","onChange","ngModel","options","showClear"],["placeholder","Tous les types","styleClass","w-10rem",3,"ngModelChange","onChange","ngModel","options","showClear"],["placeholder","Tous les pavillons","styleClass","w-10rem",3,"ngModelChange","onChange","ngModel","options","showClear"],["placeholder","Tous les statuts","styleClass","w-10rem",3,"ngModelChange","onChange","ngModel","options","showClear"],["responsiveLayout","scroll","currentPageReportTemplate","Affichage de {first} \xE0 {last} sur {totalRecords} navires","styleClass","p-datatable-gridlines",3,"onLazyLoad","value","loading","paginator","rows","totalRecords","lazy","showCurrentPageReport","rowsPerPageOptions"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[2,"width","3rem"],["pSortableColumn","nom"],["field","nom"],["pSortableColumn","numeroIMO"],["field","numeroIMO"],["pSortableColumn","compagnieId"],["field","compagnieId"],["pSortableColumn","active"],["field","active"],[2,"width","12rem"],[1,"font-medium","text-color-secondary"],[1,"flex","flex-col"],[1,"font-semibold","text-primary"],[1,"text-color-secondary"],[1,"pi","pi-map-marker","mr-1"],[1,"font-semibold","ship-imo"],[1,"flex","flex-col","gap-1"],[3,"label"],["styleClass","flag-chip",3,"label"],[1,"company-name"],[3,"value","severity"],[1,"flex","gap-1"],["pButton","","type","button","icon","pi pi-eye","pTooltip","Voir les d\xE9tails","tooltipPosition","top",1,"p-button-rounded","p-button-text","p-button-sm",3,"click"],["pButton","","type","button","icon","pi pi-pencil","pTooltip","Modifier","tooltipPosition","top",1,"p-button-rounded","p-button-text","p-button-sm",2,"color","var(--svs-accent)",3,"click"],["pButton","","type","button","tooltipPosition","top",1,"p-button-rounded","p-button-text","p-button-sm",2,"color","var(--svs-primary-light)",3,"click","icon","pTooltip"],["pButton","","type","button","icon","pi pi-trash","pTooltip","Supprimer","tooltipPosition","top",1,"p-button-rounded","p-button-text","p-button-sm","p-button-danger",3,"click"],["colspan","9",1,"text-center"],[1,"empty-state"],[1,"pi","pi-send","empty-icon"],["pButton","","type","button","label","Effacer les filtres","icon","pi pi-filter-slash","class","p-button-text",3,"click",4,"ngIf"],["pButton","","type","button","label","Effacer les filtres","icon","pi pi-filter-slash",1,"p-button-text",3,"click"]],template:function(t,i){t&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"p-iconfield",4)(5,"input",5),O("ngModelChange",function(p){return y(i.searchTerm,p)||(i.searchTerm=p),p}),d("input",function(){return i.onSearch()}),o(),m(6,"p-inputicon",6),o()(),n(7,"div",7)(8,"p-dropdown",8),O("ngModelChange",function(p){return y(i.selectedCompany,p)||(i.selectedCompany=p),p}),d("onChange",function(){return i.onFilter()}),o(),n(9,"p-dropdown",9),O("ngModelChange",function(p){return y(i.selectedShipType,p)||(i.selectedShipType=p),p}),d("onChange",function(){return i.onFilter()}),o(),n(10,"p-dropdown",10),O("ngModelChange",function(p){return y(i.selectedFlag,p)||(i.selectedFlag=p),p}),d("onChange",function(){return i.onFilter()}),o(),n(11,"p-dropdown",11),O("ngModelChange",function(p){return y(i.selectedStatus,p)||(i.selectedStatus=p),p}),d("onChange",function(){return i.onFilter()}),o()()()(),n(12,"div",1)(13,"p-table",12),d("onLazyLoad",function(p){return i.onLazyLoad(p)}),u(14,it,19,0,"ng-template",13)(15,nt,32,16,"ng-template",14)(16,rt,9,2,"ng-template",15),o()()()),t&2&&(a(5),M("ngModel",i.searchTerm),a(3),M("ngModel",i.selectedCompany),c("options",i.companyOptions)("showClear",!0),a(),M("ngModel",i.selectedShipType),c("options",i.shipTypeOptions)("showClear",!0),a(),M("ngModel",i.selectedFlag),c("options",i.flagOptions)("showClear",!0),a(),M("ngModel",i.selectedStatus),c("options",i.statusOptions)("showClear",!0),a(2),c("value",i.ships)("loading",i.loading)("paginator",!0)("rows",i.pageSize)("totalRecords",i.totalRecords)("lazy",!0)("showCurrentPageReport",!0)("rowsPerPageOptions",N(21,et)))},dependencies:[I,F,Te,$,Y,Pe,qe,ze,ge,Ae,Re,D,T,U,Q,X,K,j,V,H,fe,he,B,J,Z,Le,Ne],styles:[".ship-list[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{background:var(--svs-surface);border:1px solid var(--svs-surface-dark);border-radius:6px;padding:1.5rem;margin-bottom:1rem}.ship-list[_ngcontent-%COMP%]   .ship-imo[_ngcontent-%COMP%]{font-family:Courier New,monospace;color:var(--svs-primary);font-weight:600}.ship-list[_ngcontent-%COMP%]   .dimensions-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.ship-list[_ngcontent-%COMP%]   .dimensions-info[_ngcontent-%COMP%]   .dimension-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.25rem}.ship-list[_ngcontent-%COMP%]   .dimensions-info[_ngcontent-%COMP%]   .dimension-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-weight:600;color:var(--svs-text);opacity:.7;min-width:1.5rem}.ship-list[_ngcontent-%COMP%]   .dimensions-info[_ngcontent-%COMP%]   .dimension-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.9rem;color:var(--svs-text)}.ship-list[_ngcontent-%COMP%]   .tonnage-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.ship-list[_ngcontent-%COMP%]   .tonnage-info[_ngcontent-%COMP%]   .tonnage-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.25rem}.ship-list[_ngcontent-%COMP%]   .tonnage-info[_ngcontent-%COMP%]   .tonnage-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-weight:600;color:var(--svs-accent);opacity:.8;min-width:2rem;font-size:.8rem}.ship-list[_ngcontent-%COMP%]   .tonnage-info[_ngcontent-%COMP%]   .tonnage-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.9rem;color:var(--svs-text);font-weight:500}.ship-list[_ngcontent-%COMP%]   .company-name[_ngcontent-%COMP%]{font-weight:500;color:var(--svs-primary)}.ship-list[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{padding:3rem 1rem;text-align:center}.ship-list[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:3rem;color:var(--svs-text);opacity:.5;margin-bottom:1rem}.ship-list[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:var(--svs-text);margin:0 0 .5rem;font-size:1.25rem}.ship-list[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--svs-text);opacity:.7;margin:0 0 1rem}.ship-list[_ngcontent-%COMP%]     .p-chip{font-size:.75rem;padding:.25rem .5rem}.ship-list[_ngcontent-%COMP%]     .p-chip.flag-chip{background-color:var(--svs-surface-dark);color:var(--svs-text)}.ship-list[_ngcontent-%COMP%]     .p-datatable .p-datatable-thead>tr>th{background:var(--svs-surface);color:var(--svs-text);border-color:var(--svs-surface-dark);font-weight:600}.ship-list[_ngcontent-%COMP%]     .p-datatable .p-datatable-tbody>tr>td{border-color:var(--svs-surface-dark)}.ship-list[_ngcontent-%COMP%]     .p-datatable .p-datatable-tbody>tr:hover{background:var(--svs-surface-dark)}.ship-list[_ngcontent-%COMP%]     .p-button.p-button-raised{background-color:var(--svs-primary);border-color:var(--svs-primary)}.ship-list[_ngcontent-%COMP%]     .p-button.p-button-raised:hover{background-color:var(--svs-primary-light);border-color:var(--svs-primary-light)}.ship-list[_ngcontent-%COMP%]     .p-tag.p-tag-success{background-color:#10b981;color:#fff}.ship-list[_ngcontent-%COMP%]     .p-tag.p-tag-danger{background-color:#ef4444;color:#fff}"]})};function st(s,e){s&1&&(n(0,"small",32),r(1," Le nom du navire est obligatoire "),o())}function lt(s,e){s&1&&(n(0,"small",32),r(1," La compagnie est obligatoire "),o())}function pt(s,e){s&1&&(n(0,"small",32),r(1," Le type de navire est obligatoire "),o())}function mt(s,e){s&1&&(n(0,"small",32),r(1," Le pavillon est obligatoire "),o())}function ct(s,e){s&1&&(n(0,"small",32),r(1," Le port d'attache est obligatoire "),o())}function dt(s,e){s&1&&(n(0,"span"),r(1," Le num\xE9ro IMO est obligatoire "),o())}function gt(s,e){s&1&&(n(0,"span"),r(1," Format invalide (7 chiffres) "),o())}function ut(s,e){if(s&1&&(n(0,"small",32),u(1,dt,2,0,"span",33)(2,gt,2,0,"span",33),o()),s&2){let t,i,l=h();a(),c("ngIf",(t=l.shipForm.get("numeroIMO"))==null?null:t.hasError("required")),a(),c("ngIf",(i=l.shipForm.get("numeroIMO"))==null?null:i.hasError("pattern"))}}function ht(s,e){s&1&&(n(0,"span"),r(1," Le num\xE9ro MMSI est obligatoire "),o())}function ft(s,e){s&1&&(n(0,"span"),r(1," Format invalide (9 chiffres) "),o())}function vt(s,e){if(s&1&&(n(0,"small",32),u(1,ht,2,0,"span",33)(2,ft,2,0,"span",33),o()),s&2){let t,i,l=h();a(),c("ngIf",(t=l.shipForm.get("numeroMMSI"))==null?null:t.hasError("required")),a(),c("ngIf",(i=l.shipForm.get("numeroMMSI"))==null?null:i.hasError("pattern"))}}function _t(s,e){s&1&&(n(0,"small",32),r(1," L'indicatif d'appel est obligatoire "),o())}function Ct(s,e){s&1&&(n(0,"small",32),r(1," La soci\xE9t\xE9 de classification est obligatoire "),o())}var ie=class s{constructor(e,t,i,l,p){this.fb=e;this.shipService=t;this.companyService=i;this.messageService=l;this.logger=p;this.initForm(),this.initializeOptions()}ship=null;visible=!1;formSubmit=new P;formCancel=new P;shipForm;loading=!1;isEditMode=!1;currentYear=new Date().getFullYear();companyOptions=[];shipTypeOptions=[];flagOptions=[];classificationOptions=[];isPassengerShip=!1;ngOnInit(){this.initForm()}ngOnChanges(e){e.ship&&this.shipForm&&this.updateForm()}initForm(){this.shipForm=this.fb.group({nom:["",[f.required,f.minLength(2)]],compagnieId:[null,[f.required]],typeNavire:["",[f.required]],pavillon:["",[f.required]],portAttache:["",[f.required]],numeroIMO:["",[f.required,f.pattern(/^\d{7}$/)]],numeroMMSI:["",[f.required,f.pattern(/^\d{9}$/)]],numeroAppel:["",[f.required,f.minLength(2)]],classification:["",[f.required]]}),this.updateForm()}tonnageValidator=e=>{let t=e.get("tonnageBrut")?.value,i=e.get("tonnageNet")?.value;return t&&i&&i>=t?{tonnageInvalid:!0}:null};initializeOptions(){this.shipService.getShipTypes().subscribe({next:e=>{this.shipTypeOptions=e}}),this.flagOptions=te.map(e=>({label:e,value:e})),this.shipService.getFlag().subscribe({next:e=>{this.flagOptions=e}}),this.shipService.getClassifications().subscribe({next:e=>{this.classificationOptions=e}}),this.companyService.getCompanies().subscribe({next:e=>{this.companyOptions=e.companies.filter(t=>t.active).map(t=>({label:t.nom,value:t.id}))},error:e=>{this.logger.error("Erreur lors du chargement des compagnies",e)}})}updateForm(){this.ship?(this.isEditMode=!0,this.shipForm.patchValue({nom:this.ship.nom,compagnieId:this.ship.compagnieId,typeNavire:this.ship.typeNavire,pavillon:this.ship.pavillon,portAttache:this.ship.portAttache,numeroIMO:this.ship.numeroIMO,numeroMMSI:this.ship.numeroMMSI,numeroAppel:this.ship.numeroAppel,classification:this.ship.classification})):(this.isEditMode=!1,this.shipForm.reset(),this.isPassengerShip=!1)}isFieldInvalid(e){let t=this.shipForm.get(e);return!!(t&&t.invalid&&(t.dirty||t.touched))}onCallSignChange(e){let t=e.target.value.toUpperCase().replace(/[^A-Z0-9]/g,"");this.shipForm.patchValue({numeroAppel:t},{emitEvent:!1})}onShipTypeChange(e){let t=e.value}onSubmit(){if(this.shipForm.valid){this.loading=!0;let e=this.shipForm.value;if(this.isEditMode&&this.ship){let t=le({id:this.ship.id},e);this.shipService.updateShip(t).subscribe({next:i=>{this.messageService.add({severity:"success",summary:"Succ\xE8s",detail:`Navire "${i.nom}" modifi\xE9 avec succ\xE8s`}),this.formSubmit.emit(i),this.loading=!1,this.resetForm()},error:i=>{this.loading=!1,this.logger.error("Erreur lors de la modification",i)}})}else{let t=e;this.shipService.createShip(t).subscribe({next:i=>{this.messageService.add({severity:"success",summary:"Succ\xE8s",detail:`Navire "${i.nom}" cr\xE9\xE9 avec succ\xE8s`}),this.formSubmit.emit(i),this.loading=!1,this.resetForm()},error:i=>{this.loading=!1,this.logger.error("Erreur lors de la cr\xE9ation",i)}})}}else Object.keys(this.shipForm.controls).forEach(e=>{this.shipForm.get(e)?.markAsTouched()}),this.messageService.add({severity:"warn",summary:"Attention",detail:"Veuillez corriger les erreurs dans le formulaire"})}onCancel(){this.resetForm(),this.formCancel.emit()}resetForm(){this.shipForm.reset(),this.isEditMode=!1,this.ship=null,this.isPassengerShip=!1}static \u0275fac=function(t){return new(t||s)(g(Fe),g(ee),g(k),g(q),g(w))};static \u0275cmp=x({type:s,selectors:[["app-ship-form"]],inputs:{ship:"ship",visible:"visible"},outputs:{formSubmit:"formSubmit",formCancel:"formCancel"},features:[R],decls:85,vars:39,consts:[[1,"ship-form",3,"ngSubmit","formGroup"],[1,"form-section"],[1,"section-title"],[1,"pi","pi-send","mr-2"],[1,"grid"],[1,"col-12","md:col-6"],["for","nom",1,"field-label"],[1,"required"],["id","nom","pInputText","","formControlName","nom","placeholder","Ex: DAKAR EXPRESS",1,"w-full"],["class","field-error",4,"ngIf"],["for","compagnieId",1,"field-label"],["id","compagnieId","formControlName","compagnieId","placeholder","S\xE9lectionner une compagnie","optionLabel","label","optionValue","value","filterBy","label",1,"w-full",3,"options","filter"],[1,"col-12","md:col-4"],["for","typeNavire",1,"field-label"],["id","typeNavire","formControlName","typeNavire","placeholder","S\xE9lectionner le type",1,"w-full",3,"onChange","options"],["for","pavillon",1,"field-label"],["id","pavillon","formControlName","pavillon","placeholder","S\xE9lectionner le pavillon",1,"w-full",3,"options","filter"],["for","portAttache",1,"field-label"],["id","portAttache","pInputText","","formControlName","portAttache","placeholder","Ex: Dakar",1,"w-full"],[1,"pi","pi-id-card","mr-2"],["for","numeroIMO",1,"field-label"],["id","numeroIMO","pInputText","","formControlName","numeroIMO","placeholder","Ex: 9876543","maxlength","7",1,"w-full","imo-input"],["for","numeroMMSI",1,"field-label"],["id","numeroMMSI","pInputText","","formControlName","numeroMMSI","placeholder","Ex: 663001234","maxlength","9",1,"w-full","mmsi-input"],["for","numeroAppel",1,"field-label"],["id","numeroAppel","pInputText","","formControlName","numeroAppel","placeholder","Ex: DAEX","maxlength","8",1,"w-full","call-sign-input",3,"input"],[1,"pi","pi-wrench","mr-2"],["for","classification",1,"field-label"],["id","classification","formControlName","classification","placeholder","S\xE9lectionner la classification",1,"w-full",3,"options","filter"],[1,"form-actions"],["type","button","pButton","","label","Annuler","icon","pi pi-times",1,"p-button-text",3,"click"],["type","submit","pButton","",1,"ml-2",2,"background-color","var(--svs-primary)","border-color","var(--svs-primary)",3,"label","icon","loading","disabled"],[1,"field-error"],[4,"ngIf"]],template:function(t,i){t&1&&(n(0,"form",0),d("ngSubmit",function(){return i.onSubmit()}),n(1,"div",1)(2,"h4",2),m(3,"i",3),r(4," Informations g\xE9n\xE9rales "),o(),n(5,"div",4)(6,"div",5)(7,"label",6),r(8," Nom du navire "),n(9,"span",7),r(10,"*"),o()(),m(11,"input",8),u(12,st,2,0,"small",9),o(),n(13,"div",5)(14,"label",10),r(15," Compagnie propri\xE9taire "),n(16,"span",7),r(17,"*"),o()(),m(18,"p-dropdown",11),u(19,lt,2,0,"small",9),o()(),n(20,"div",4)(21,"div",12)(22,"label",13),r(23," Type de navire "),n(24,"span",7),r(25,"*"),o()(),n(26,"p-dropdown",14),d("onChange",function(p){return i.onShipTypeChange(p)}),o(),u(27,pt,2,0,"small",9),o(),n(28,"div",12)(29,"label",15),r(30," Pavillon "),n(31,"span",7),r(32,"*"),o()(),m(33,"p-dropdown",16),u(34,mt,2,0,"small",9),o(),n(35,"div",12)(36,"label",17),r(37," Port d'attache "),n(38,"span",7),r(39,"*"),o()(),m(40,"input",18),u(41,ct,2,0,"small",9),o()()(),m(42,"p-divider"),n(43,"div",1)(44,"h4",2),m(45,"i",19),r(46," Identification "),o(),n(47,"div",4)(48,"div",12)(49,"label",20),r(50," Num\xE9ro IMO "),n(51,"span",7),r(52,"*"),o()(),m(53,"input",21),u(54,ut,3,2,"small",9),o(),n(55,"div",12)(56,"label",22),r(57," Num\xE9ro MMSI "),n(58,"span",7),r(59,"*"),o()(),m(60,"input",23),u(61,vt,3,2,"small",9),o(),n(62,"div",12)(63,"label",24),r(64," Indicatif d'appel "),n(65,"span",7),r(66,"*"),o()(),n(67,"input",25),d("input",function(p){return i.onCallSignChange(p)}),o(),u(68,_t,2,0,"small",9),o()()(),m(69,"p-divider"),n(70,"div",1)(71,"h4",2),m(72,"i",26),r(73," Construction et classification "),o(),n(74,"div",4)(75,"div",5)(76,"label",27),r(77," Soci\xE9t\xE9 de classification "),n(78,"span",7),r(79,"*"),o()(),m(80,"p-dropdown",28),u(81,Ct,2,0,"small",9),o()()(),n(82,"div",29)(83,"button",30),d("click",function(){return i.onCancel()}),o(),m(84,"button",31),o()()),t&2&&(c("formGroup",i.shipForm),a(11),v("ng-invalid",i.isFieldInvalid("nom")),a(),c("ngIf",i.isFieldInvalid("nom")),a(6),v("ng-invalid",i.isFieldInvalid("compagnieId")),c("options",i.companyOptions)("filter",!0),a(),c("ngIf",i.isFieldInvalid("compagnieId")),a(7),v("ng-invalid",i.isFieldInvalid("typeNavire")),c("options",i.shipTypeOptions),a(),c("ngIf",i.isFieldInvalid("typeNavire")),a(6),v("ng-invalid",i.isFieldInvalid("pavillon")),c("options",i.flagOptions)("filter",!0),a(),c("ngIf",i.isFieldInvalid("pavillon")),a(6),v("ng-invalid",i.isFieldInvalid("portAttache")),a(),c("ngIf",i.isFieldInvalid("portAttache")),a(12),v("ng-invalid",i.isFieldInvalid("numeroIMO")),a(),c("ngIf",i.isFieldInvalid("numeroIMO")),a(6),v("ng-invalid",i.isFieldInvalid("numeroMMSI")),a(),c("ngIf",i.isFieldInvalid("numeroMMSI")),a(6),v("ng-invalid",i.isFieldInvalid("numeroAppel")),a(),c("ngIf",i.isFieldInvalid("numeroAppel")),a(12),v("ng-invalid",i.isFieldInvalid("classification")),c("options",i.classificationOptions)("filter",!0),a(),c("ngIf",i.isFieldInvalid("classification")),a(3),c("label",i.isEditMode?"Modifier":"Cr\xE9er")("icon",i.isEditMode?"pi pi-check":"pi pi-plus")("loading",i.loading)("disabled",i.shipForm.invalid))},dependencies:[I,F,De,xe,$,Y,Oe,we,Ee,Ie,D,T,U,Q,ke,X,K,G,W,Be],styles:[".ship-form[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]{margin-bottom:1.5rem}.ship-form[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{color:var(--svs-primary);font-size:1.1rem;font-weight:600;margin-bottom:1rem;display:flex;align-items:center}.ship-form[_ngcontent-%COMP%]   .field-label[_ngcontent-%COMP%]{display:block;font-weight:500;margin-bottom:.5rem;color:var(--svs-text)}.ship-form[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{color:#ef4444}.ship-form[_ngcontent-%COMP%]   .field-error[_ngcontent-%COMP%]{color:#ef4444;display:block;margin-top:.25rem;font-size:.875rem}.ship-form[_ngcontent-%COMP%]   .field-info[_ngcontent-%COMP%]{color:var(--svs-accent);display:block;margin-top:.25rem;font-size:.875rem}.ship-form[_ngcontent-%COMP%]   .imo-input[_ngcontent-%COMP%], .ship-form[_ngcontent-%COMP%]   .mmsi-input[_ngcontent-%COMP%], .ship-form[_ngcontent-%COMP%]   .call-sign-input[_ngcontent-%COMP%]{font-family:Courier New,monospace;text-transform:uppercase}.ship-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:2rem;padding-top:1rem;border-top:1px solid var(--svs-surface-dark)}.ship-form[_ngcontent-%COMP%]     .ng-invalid.ng-touched{border-color:#ef4444!important}.ship-form[_ngcontent-%COMP%]     .p-dropdown.ng-invalid.ng-touched .p-dropdown-label{border-color:#ef4444!important}.ship-form[_ngcontent-%COMP%]     .p-inputnumber.ng-invalid.ng-touched .p-inputtext{border-color:#ef4444!important}.ship-form[_ngcontent-%COMP%]     .p-button:disabled{opacity:.6}"]})};var $e=s=>({"background-color":s,color:"white"});function St(s,e){if(s&1){let t=L();n(0,"div",1)(1,"div",2)(2,"div",3),m(3,"p-avatar",4),n(4,"div")(5,"h3",5),r(6),o(),n(7,"div",6),m(8,"p-chip",7)(9,"p-chip",8),o()()(),n(10,"div",9),m(11,"p-tag",10),o()(),m(12,"p-divider"),n(13,"div",11)(14,"h4",12),m(15,"i",13),r(16," Identification "),o(),n(17,"div",14)(18,"div",15)(19,"div",16)(20,"label",17),r(21,"Num\xE9ro IMO"),o(),n(22,"div",18),r(23),o()()(),n(24,"div",15)(25,"div",16)(26,"label",17),r(27,"Num\xE9ro MMSI"),o(),n(28,"div",19),r(29),o()()(),n(30,"div",15)(31,"div",16)(32,"label",17),r(33,"Indicatif d'appel"),o(),n(34,"div",20),r(35),o()()()(),n(36,"div",14)(37,"div",15)(38,"div",16)(39,"label",17),r(40,"Port d'attache"),o(),n(41,"div",21),m(42,"i",22),r(43),o()()(),n(44,"div",15)(45,"div",16)(46,"label",17),r(47,"Compagnie propri\xE9taire"),o(),n(48,"div",23),m(49,"i",24),r(50),o()()()()(),m(51,"p-divider"),n(52,"div",11)(53,"h4",12),m(54,"i",25),r(55," Construction et classification "),o(),n(56,"div",14)(57,"div",26)(58,"div",16)(59,"label",17),r(60,"Soci\xE9t\xE9 de classification"),o(),n(61,"div",21),m(62,"i",27),r(63),o()()()(),m(64,"div",14),o(),m(65,"p-divider"),n(66,"div",11)(67,"h4",12),m(68,"i",28),r(69," Informations syst\xE8me "),o(),n(70,"div",14)(71,"div",26)(72,"div",16)(73,"label",17),r(74,"Date de cr\xE9ation"),o(),n(75,"div",21),m(76,"i",29),r(77),o()()(),n(78,"div",26)(79,"div",16)(80,"label",17),r(81,"Derni\xE8re modification"),o(),n(82,"div",21),m(83,"i",30),r(84),o()()()()(),n(85,"div",31)(86,"button",32),d("click",function(){S(t);let l=h();return b(l.onEdit())}),o(),n(87,"button",33),d("click",function(){S(t);let l=h();return b(l.onClose())}),o()()()}if(s&2){let t=h();a(3),E(z(18,$e,t.getTypeColor(t.ship.typeNavire))),a(3),_(t.ship.nom),a(2),E(z(20,$e,t.getTypeColor(t.ship.typeNavire))),c("label",t.ship.typeNavire),a(),c("label",t.ship.pavillon),a(2),c("value",t.ship.active?"Actif":"Inactif")("severity",t.ship.active?"success":"danger")("rounded",!0),a(12),_(t.ship.numeroIMO),a(6),_(t.ship.numeroMMSI),a(6),_(t.ship.numeroAppel),a(8),C(" ",t.ship.portAttache," "),a(7),C(" ",t.companyName||"Chargement..."," "),a(13),C(" ",t.ship.classification," "),a(14),C(" ",t.formatDate(t.ship.created_at)," "),a(7),C(" ",t.formatDate(t.ship.updated_at)," ")}}var ne=class s{constructor(e,t){this.companyService=e;this.logger=t}ship=null;editClick=new P;closeClick=new P;companyName="";ngOnInit(){this.ship&&this.loadCompanyName()}ngOnChanges(e){e.ship&&this.ship&&this.loadCompanyName()}loadCompanyName(){this.ship&&this.companyService.getCompanyById(this.ship.compagnieId).subscribe({next:e=>{this.companyName=e.nom},error:e=>{this.companyName="Compagnie inconnue",this.logger.error("Erreur lors du chargement de la compagnie",e)}})}formatDate(e){if(!e)return"";let t=new Date(e);return new Intl.DateTimeFormat("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(t)}formatNumber(e){return new Intl.NumberFormat("fr-FR").format(e)}getRatio(e,t){return!e||!t?"-":(e/t).toFixed(2)}getTypeColor(e){return{Conteneur:"#3b82f6",Cargo:"#059669",P\u00E9trolier:"#dc2626",Vraqueur:"#7c2d12",Passagers:"#7c3aed","Ro-Ro":"#ea580c",Frigorifique:"#0891b2",Chimiquier:"#be185d",Gazier:"#4338ca",Remorqueur:"#374151",Pilote:"#1f2937"}[e]||"#6b7280"}getEstimatedSpeed(){if(!this.ship)return"-";let t={Conteneur:22,Cargo:18,P\u00E9trolier:16,Vraqueur:14,Passagers:25,"Ro-Ro":20,Frigorifique:19,Chimiquier:15,Gazier:17,Remorqueur:12,Pilote:15}[this.ship.typeNavire]||16;return`${t-2}-${t}`}onEdit(){this.ship&&this.editClick.emit(this.ship)}onClose(){this.closeClick.emit()}static \u0275fac=function(t){return new(t||s)(g(k),g(w))};static \u0275cmp=x({type:s,selectors:[["app-ship-detail"]],inputs:{ship:"ship"},outputs:{editClick:"editClick",closeClick:"closeClick"},features:[R],decls:1,vars:1,consts:[["class","ship-detail",4,"ngIf"],[1,"ship-detail"],[1,"ship-header"],[1,"flex","align-items-center","gap-3"],["icon","pi pi-send","size","large","shape","circle"],[1,"ship-name"],[1,"ship-info"],[3,"label"],["styleClass","flag-chip ml-2",3,"label"],[1,"ship-status"],[3,"value","severity","rounded"],[1,"detail-section"],[1,"section-title"],[1,"pi","pi-id-card","mr-2"],[1,"grid"],[1,"col-12","columns-3"],[1,"detail-field"],[1,"field-label"],[1,"field-value","imo-value"],[1,"field-value","mmsi-value"],[1,"field-value","call-sign-value"],[1,"field-value"],[1,"pi","pi-map-marker","mr-2"],[1,"field-value","company-value"],[1,"pi","pi-building","mr-2"],[1,"pi","pi-wrench","mr-2"],[1,"col-12","md:col-6"],[1,"pi","pi-verified","mr-2"],[1,"pi","pi-info-circle","mr-2"],[1,"pi","pi-plus-circle","mr-2"],[1,"pi","pi-pencil","mr-2"],[1,"detail-actions"],["pButton","","type","button","label","Modifier","icon","pi pi-pencil",1,"p-button-raised",2,"background-color","var(--svs-accent)","border-color","var(--svs-accent)",3,"click"],["pButton","","type","button","label","Fermer","icon","pi pi-times",1,"p-button-text","ml-2",3,"click"]],template:function(t,i){t&1&&u(0,St,88,22,"div",0),t&2&&c("ngIf",i.ship)},dependencies:[I,F,D,T,j,V,G,W,_e,ve,J,Z,Ve,B],styles:[".ship-detail[_ngcontent-%COMP%]   .ship-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:1.5rem}.ship-detail[_ngcontent-%COMP%]   .ship-header[_ngcontent-%COMP%]   .ship-name[_ngcontent-%COMP%]{margin:0;color:var(--svs-primary);font-size:1.5rem;font-weight:600}.ship-detail[_ngcontent-%COMP%]   .ship-header[_ngcontent-%COMP%]   .ship-info[_ngcontent-%COMP%]{margin-top:.5rem;display:flex;align-items:center;flex-wrap:wrap;gap:.5rem}.ship-detail[_ngcontent-%COMP%]   .detail-section[_ngcontent-%COMP%]{margin-bottom:2rem}.ship-detail[_ngcontent-%COMP%]   .detail-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{color:var(--svs-primary);font-size:1.1rem;font-weight:600;margin-bottom:1rem;display:flex;align-items:center}.ship-detail[_ngcontent-%COMP%]   .detail-field[_ngcontent-%COMP%]{margin-bottom:1rem}.ship-detail[_ngcontent-%COMP%]   .detail-field[_ngcontent-%COMP%]   .field-label[_ngcontent-%COMP%]{display:block;font-weight:500;color:var(--svs-text);font-size:.875rem;opacity:.8;margin-bottom:.25rem}.ship-detail[_ngcontent-%COMP%]   .detail-field[_ngcontent-%COMP%]   .field-value[_ngcontent-%COMP%]{color:var(--svs-text);font-size:1rem;display:flex;align-items:center}.ship-detail[_ngcontent-%COMP%]   .detail-field[_ngcontent-%COMP%]   .field-value.imo-value[_ngcontent-%COMP%], .ship-detail[_ngcontent-%COMP%]   .detail-field[_ngcontent-%COMP%]   .field-value.mmsi-value[_ngcontent-%COMP%], .ship-detail[_ngcontent-%COMP%]   .detail-field[_ngcontent-%COMP%]   .field-value.call-sign-value[_ngcontent-%COMP%]{font-family:Courier New,monospace;font-weight:600;color:var(--svs-primary);font-size:1.1rem}.ship-detail[_ngcontent-%COMP%]   .detail-field[_ngcontent-%COMP%]   .field-value.company-value[_ngcontent-%COMP%]{color:var(--svs-accent);font-weight:500}.ship-detail[_ngcontent-%COMP%]   .dimensions-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:1rem;margin-bottom:1rem}.ship-detail[_ngcontent-%COMP%]   .dimensions-grid[_ngcontent-%COMP%]   .dimension-card[_ngcontent-%COMP%]{background:var(--svs-surface);border:1px solid var(--svs-surface-dark);border-radius:8px;padding:1rem;text-align:center;transition:transform .2s ease}.ship-detail[_ngcontent-%COMP%]   .dimensions-grid[_ngcontent-%COMP%]   .dimension-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #0000001a}.ship-detail[_ngcontent-%COMP%]   .dimensions-grid[_ngcontent-%COMP%]   .dimension-card[_ngcontent-%COMP%]   .dimension-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:.5rem;margin-bottom:.5rem;color:var(--svs-text);opacity:.8;font-size:.9rem}.ship-detail[_ngcontent-%COMP%]   .dimensions-grid[_ngcontent-%COMP%]   .dimension-card[_ngcontent-%COMP%]   .dimension-value[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:var(--svs-primary)}.ship-detail[_ngcontent-%COMP%]   .tonnage-section[_ngcontent-%COMP%]   .tonnage-card[_ngcontent-%COMP%]{background:var(--svs-surface);border:1px solid var(--svs-surface-dark);border-radius:8px;padding:1rem;text-align:center}.ship-detail[_ngcontent-%COMP%]   .tonnage-section[_ngcontent-%COMP%]   .tonnage-card[_ngcontent-%COMP%]   .tonnage-header[_ngcontent-%COMP%]{margin-bottom:.5rem}.ship-detail[_ngcontent-%COMP%]   .tonnage-section[_ngcontent-%COMP%]   .tonnage-card[_ngcontent-%COMP%]   .tonnage-header[_ngcontent-%COMP%]   .tonnage-label[_ngcontent-%COMP%]{font-size:.9rem;color:var(--svs-text);opacity:.8}.ship-detail[_ngcontent-%COMP%]   .tonnage-section[_ngcontent-%COMP%]   .tonnage-card[_ngcontent-%COMP%]   .tonnage-value[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:700;color:var(--svs-accent);margin-bottom:.5rem}.ship-detail[_ngcontent-%COMP%]   .tonnage-section[_ngcontent-%COMP%]   .tonnage-card[_ngcontent-%COMP%]   .tonnage-bar[_ngcontent-%COMP%]{margin:.5rem 0}.ship-detail[_ngcontent-%COMP%]   .tonnage-section[_ngcontent-%COMP%]   .tonnage-card[_ngcontent-%COMP%]   .tonnage-ratio[_ngcontent-%COMP%]{color:var(--svs-text);opacity:.7;font-size:.8rem}.ship-detail[_ngcontent-%COMP%]   .metrics-section[_ngcontent-%COMP%]{background:var(--svs-surface-dark);border-radius:8px;padding:1rem}.ship-detail[_ngcontent-%COMP%]   .metrics-section[_ngcontent-%COMP%]   .metric-item[_ngcontent-%COMP%]{text-align:center}.ship-detail[_ngcontent-%COMP%]   .metrics-section[_ngcontent-%COMP%]   .metric-item[_ngcontent-%COMP%]   .metric-label[_ngcontent-%COMP%]{font-size:.85rem;color:var(--svs-text);opacity:.8;margin-bottom:.25rem}.ship-detail[_ngcontent-%COMP%]   .metrics-section[_ngcontent-%COMP%]   .metric-item[_ngcontent-%COMP%]   .metric-value[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;color:var(--svs-primary)}.ship-detail[_ngcontent-%COMP%]   .performance-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1rem}.ship-detail[_ngcontent-%COMP%]   .performance-grid[_ngcontent-%COMP%]   .performance-card[_ngcontent-%COMP%]{background:var(--svs-surface);border:1px solid var(--svs-surface-dark);border-radius:8px;padding:1rem;display:flex;align-items:center;gap:1rem}.ship-detail[_ngcontent-%COMP%]   .performance-grid[_ngcontent-%COMP%]   .performance-card[_ngcontent-%COMP%]   .performance-icon[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:50%;background:var(--svs-primary);color:#fff;display:flex;align-items:center;justify-content:center;font-size:1.2rem}.ship-detail[_ngcontent-%COMP%]   .performance-grid[_ngcontent-%COMP%]   .performance-card[_ngcontent-%COMP%]   .performance-info[_ngcontent-%COMP%]{flex:1}.ship-detail[_ngcontent-%COMP%]   .performance-grid[_ngcontent-%COMP%]   .performance-card[_ngcontent-%COMP%]   .performance-info[_ngcontent-%COMP%]   .performance-label[_ngcontent-%COMP%]{font-size:.9rem;color:var(--svs-text);opacity:.8;margin-bottom:.25rem}.ship-detail[_ngcontent-%COMP%]   .performance-grid[_ngcontent-%COMP%]   .performance-card[_ngcontent-%COMP%]   .performance-info[_ngcontent-%COMP%]   .performance-value[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;color:var(--svs-accent);margin-bottom:.25rem}.ship-detail[_ngcontent-%COMP%]   .performance-grid[_ngcontent-%COMP%]   .performance-card[_ngcontent-%COMP%]   .performance-info[_ngcontent-%COMP%]   .performance-note[_ngcontent-%COMP%]{font-size:.75rem;color:var(--svs-text);opacity:.6}.ship-detail[_ngcontent-%COMP%]   .detail-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:2rem;padding-top:1rem;border-top:1px solid var(--svs-surface-dark)}.ship-detail[_ngcontent-%COMP%]     .p-chip{font-size:.75rem}.ship-detail[_ngcontent-%COMP%]     .p-chip.flag-chip{background-color:var(--svs-surface-dark);color:var(--svs-text)}.ship-detail[_ngcontent-%COMP%]     .p-tag.p-tag-success{background-color:#10b981;color:#fff}.ship-detail[_ngcontent-%COMP%]     .p-tag.p-tag-danger{background-color:#ef4444;color:#fff}.ship-detail[_ngcontent-%COMP%]     .tonnage-progress .p-progressbar-value{background-color:var(--svs-primary)}.ship-detail[_ngcontent-%COMP%]     .tonnage-progress-net .p-progressbar-value{background-color:var(--svs-accent)}.ship-detail[_ngcontent-%COMP%]     .passenger-progress .p-progressbar-value{background-color:#7c3aed}.ship-detail[_ngcontent-%COMP%]     .p-badge.p-badge-success{background-color:#10b981}.ship-detail[_ngcontent-%COMP%]     .p-badge.p-badge-warning{background-color:#f59e0b}.ship-detail[_ngcontent-%COMP%]     .p-badge.p-badge-danger{background-color:#ef4444}"]})};var bt=()=>({width:"95vw",maxWidth:"900px"}),Mt=()=>({width:"95vw",maxWidth:"800px"}),oe=class s{constructor(e){this.logger=e}showFormDialog=!1;showDetailDialog=!1;selectedShip=null;isEditMode=!1;shipListComponent;get formDialogTitle(){return this.isEditMode?"Modifier le navire":"Nouveau navire"}onShipEvent(e){switch(this.logger.debug("\xC9v\xE9nement navire re\xE7u",e),e.type){case"edit":this.openEditDialog(e.ship);break;case"view":this.openDetailDialog(e.ship);break;default:this.logger.warn("Type d'\xE9v\xE9nement non g\xE9r\xE9",e.type)}}openCreateDialog(){this.selectedShip=null,this.isEditMode=!1,this.showFormDialog=!0,this.logger.info("Dialog de cr\xE9ation de navire ouvert")}openEditDialog(e){this.selectedShip=e,this.isEditMode=!0,this.showFormDialog=!0,this.logger.info(`Dialog d'\xE9dition ouvert pour le navire: ${e.nom}`)}openDetailDialog(e){this.selectedShip=e,this.showDetailDialog=!0,this.logger.info(`Dialog de d\xE9tails ouvert pour le navire: ${e.nom}`)}onFormSubmit(e){this.logger.info("Formulaire soumis avec succ\xE8s",{shipId:e.id,nom:e.nom}),this.closeFormDialog(),this.shipListComponent?.loadShips()}onFormCancel(){this.logger.info("Formulaire annul\xE9"),this.closeFormDialog()}onFormDialogHide(){this.closeFormDialog()}closeFormDialog(){this.showFormDialog=!1,this.selectedShip=null,this.isEditMode=!1}onDetailEditClick(e){this.logger.info(`Passage des d\xE9tails \xE0 l'\xE9dition pour: ${e.nom}`),this.showDetailDialog=!1,this.openEditDialog(e)}onDetailCloseClick(){this.closeDetailDialog()}onDetailDialogHide(){this.closeDetailDialog()}closeDetailDialog(){this.showDetailDialog=!1,this.selectedShip=null}onCreate(){this.openCreateDialog()}static \u0275fac=function(t){return new(t||s)(g(w))};static \u0275cmp=x({type:s,selectors:[["app-ships"]],viewQuery:function(t,i){if(t&1&&pe(A,7),t&2){let l;me(l=ce())&&(i.shipListComponent=l.first)}},decls:19,vars:20,consts:[[1,"ships-page"],[1,"card","mb-5"],[1,"flex","flex-col","lg:flex-row","lg:justify-between","lg:align-middle"],[1,"mb-3","lg:mb-0"],[1,"flex","align-items-center","mb-2"],[1,"pi","pi-compass","text-blue-600","text-2xl","mr-3"],[1,"text-2xl","font-semibold","text-blue-900","m-0"],[1,"text-600","m-0","line-height-3"],[1,"flex","flex-column","sm:flex-row","gap-2"],["icon","pi pi-plus","label","Nouveau navire",1,"p-button-primary",3,"click"],[3,"shipEvent"],["styleClass","ship-dialog",3,"visibleChange","onHide","visible","modal","draggable","resizable","closable","header"],[3,"formSubmit","formCancel","ship","visible"],["header","D\xE9tails du navire","styleClass","ship-dialog",3,"visibleChange","onHide","visible","modal","draggable","resizable","closable"],[3,"editClick","closeClick","ship"]],template:function(t,i){t&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),m(5,"i",5),n(6,"h1",6),r(7,"Gestion des Navires"),o()(),n(8,"p",7),r(9," Suivi et gestion des Navires "),o()(),n(10,"div",8)(11,"p-button",9),d("click",function(){return i.onCreate()}),o()()()(),n(12,"app-ship-list",10),d("shipEvent",function(p){return i.onShipEvent(p)}),o(),n(13,"p-dialog",11),O("visibleChange",function(p){return y(i.showFormDialog,p)||(i.showFormDialog=p),p}),d("onHide",function(){return i.onFormDialogHide()}),n(14,"app-ship-form",12),d("formSubmit",function(p){return i.onFormSubmit(p)})("formCancel",function(){return i.onFormCancel()}),o()(),n(15,"p-dialog",13),O("visibleChange",function(p){return y(i.showDetailDialog,p)||(i.showDetailDialog=p),p}),d("onHide",function(){return i.onDetailDialogHide()}),n(16,"app-ship-detail",14),d("editClick",function(p){return i.onDetailEditClick(p)})("closeClick",function(){return i.onDetailCloseClick()}),o()(),m(17,"p-toast")(18,"p-confirmDialog"),o()),t&2&&(a(13),E(N(18,bt)),M("visible",i.showFormDialog),c("modal",!0)("draggable",!1)("resizable",!1)("closable",!0)("header",i.formDialogTitle),a(),c("ship",i.selectedShip)("visible",i.showFormDialog),a(),E(N(19,Mt)),M("visible",i.showDetailDialog),c("modal",!0)("draggable",!1)("resizable",!1)("closable",!0),a(),c("ship",i.selectedShip))},dependencies:[I,Se,Ce,Me,be,H,ye,A,ie,ne,ue],styles:[".ships-page[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]{margin-bottom:2rem}.ships-page[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:var(--svs-primary);font-size:2rem;font-weight:700;margin:0 0 .5rem;display:flex;align-items:center}.ships-page[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]   .page-description[_ngcontent-%COMP%]{color:var(--svs-text);font-size:1rem;margin:0;opacity:.8}.ships-page[_ngcontent-%COMP%]     .ship-dialog .p-dialog-header{background:var(--svs-surface);border-bottom:1px solid var(--svs-surface-dark)}.ships-page[_ngcontent-%COMP%]     .ship-dialog .p-dialog-header .p-dialog-title{color:var(--svs-primary);font-weight:600}.ships-page[_ngcontent-%COMP%]     .ship-dialog .p-dialog-content{background:var(--svs-surface);padding:1.5rem;max-height:80vh;overflow-y:auto}.ships-page[_ngcontent-%COMP%]     .ship-dialog .p-dialog-footer{background:var(--svs-surface);border-top:1px solid var(--svs-surface-dark)}.ships-page[_ngcontent-%COMP%]     .p-toast .p-toast-message.p-toast-message-success{background-color:#10b981;border-color:#059669;color:#fff}.ships-page[_ngcontent-%COMP%]     .p-toast .p-toast-message.p-toast-message-error{background-color:#ef4444;border-color:#dc2626;color:#fff}.ships-page[_ngcontent-%COMP%]     .p-toast .p-toast-message.p-toast-message-warn{background-color:#f59e0b;border-color:#d97706;color:#fff}.ships-page[_ngcontent-%COMP%]     .p-confirm-dialog .p-dialog-header{background:var(--svs-surface)}.ships-page[_ngcontent-%COMP%]     .p-confirm-dialog .p-dialog-header .p-dialog-title{color:var(--svs-primary)}.ships-page[_ngcontent-%COMP%]     .p-confirm-dialog .p-dialog-content{background:var(--svs-surface)}.ships-page[_ngcontent-%COMP%]     .p-confirm-dialog .p-confirm-dialog-message{color:var(--svs-text)}"]})};var Yi=[{path:"list",component:oe}];export{Yi as default};
